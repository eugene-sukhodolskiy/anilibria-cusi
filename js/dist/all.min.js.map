{"version":3,"sources":["Alert.js","App.js","Auth.js","CacheProvider.js","Loader.js","PostRender.js","Renderer.js","Router.js","StoredPlayerDataManager.js","conf.js","functions.js","initers.js"],"names":["Alert","constructor","type","content","isSingleton","isClosable","this","id","Date","getTime","Math","random","alertsList","referenceComponent","document","querySelector","console","error","template","cloneNode","getInstance","initComponent","classList","add","setAttribute","innerHTML","addEventListener","e","preventDefault","close","showIn","container","append","setTimeout","remove","changeContent","newContent","closeAlertComponent","alertId","createAlertComponent","createGlobalAlertComponent","alert","querySelectorAll","forEach","item","currentTarget","getAttribute","App","router","Router","auth","Auth","renderer","Renderer","postRender","PostRender","loader","Loader","cacheProvider","CacheProvider","storedPlayerDataManager","StoredPlayerDataManager","init","initers","urlMonitor","initDisplayingAuthBtns","initPreloadSpinner","initBaseEvents","initGenres","initGoToTopBtn","renderPreloadSpinner","logout","contains","hideMobNav","showMobNav","squery","keyCode","value","trim","location","hash","blur","lmap","home","homePageUpToLoad","search","searchPageUpToLoad","genres","genresPageUpToLoad","let","p","page","renderContainer","pageNum","ceil","childNodes","length","_CONF","perPage","resp","list","insertListToRenderContainer","genresList","items","appendChild","renderGenresList","node","getSessionId","goTopBtn","goTopBtnVisibilityHandler","window","pageYOffset","step","round","animationInterval","setInterval","newPageYOffset","max","scrollTo","top","clearInterval","app","formSelector","form","submitBtn","initForm","email","passwd","xhr","XMLHttpRequest","open","onload","status","JSON","parse","response","err","localStorage","setItem","sessionId","mes","fdata","FormData","send","removeItem","unsetCache","cache","lifetime","createAt","manager","storage","getItem","setCache","key","data","saveCache","stringify","cacheable","code","callback","currentTimestamp","anilibriaRequest","items_per_page","filter","getItemCardFields","decodeURI","split","selectedGenres","getSelectedGenres","join","favouritesList","sessId","cacheableCallback","session","limit","sorting_type","scheduleList","itemCard","html","nodeFromHTML","parentNode","single","post","i","tabs","renderTabs","name","player-container","btn","torrents-container","renderTorrents","active","playerData","default_quality","preroll_deny","file","player","files","host","hls","sd","hd","fhd","push","skip","skips","opening","title","poster","preview","domen","download","Playerjs","renderFavoriteBtn","favoriteBtn","postId","addToFavourites","removeFromFavourites","genreBtn","genre","inx","map","indexOf","splice","tabName","renderThumbnail","string","inSchedule","isToday","charAt","toUpperCase","slice","watched","localPlayerData","currentEpisode","episodes","last","posters","medium","url","renderItemCard","thumb","names","ru","season","year","full_string","torrents","torrent","size","total_size","toString","substr","torrent_id","quality","seeders","leechers","props","nav","renderSingle","voices","team","voice","schedule","en","description","renderGenreBtn","createElement","pagesContainerSelector","defaultPageId","notFoundPageId","containerSelector","findedPages","pages","currentPage","currentPath","zindex","goToPage","pageId","style","zIndex","route","initPage","pageName","localStorageItemName","restorePlayerDataFromBackup","cleanupBackupedPlayerData","backupPlayerData","getStorablePlayerData","bPlayerData","getBackupedPlayerData","timing","len","backupedPlayerData","path","pathname","timestamp","episode","Object","keys","ID","watchedAt","Number","MAX_VALUE","api","ver","numbOfRelevant","stdXHR","method","onloadCallback","setRequestHeader","onerror","makeSelectedGenresActivated","api2Flag","setPageTitle","pageTitle","title_id","params","query","URLSearchParams","val","parseInt","transformScheduleList","resultList","currentDayNum","getDay","dayNames","j","day","num","include","after","ids","resp2","series","favs"],"mappings":"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","file":"all.min.js","sourcesContent":["class Alert {\n\tconstructor(type, content, isSingleton, isClosable) {\n\t\tthis.id = \"alert-id-\" + (new Date()).getTime() + Math.random();\n\t\talertsList[this.id] = this;\n\t\tthis.type = type;\n\t\tthis.content = content || \"\";\n\t\tthis.isSingleton = isSingleton || false;\n\t\tthis.isClosable = isClosable || false;\n\n\t\tconst referenceComponent = document.querySelector(`.component.alert[data-id=\"alert-id-reference\"]`);\n\t\tif(!referenceComponent){\n\t\t\treturn console.error(\"Reference of alert component not found\");\n\t\t}\n\n\t\tthis.template = referenceComponent.cloneNode(true);\n\t\tthis.template.getInstance = () => this;\n\t\tthis.initComponent();\n\t}\n\n\tinitComponent() {\n\t\tthis.template.classList.add(`alert-${this.type}`);\n\t\tthis.template.setAttribute(\"data-id\", this.id);\n\t\tthis.template.querySelector(\".content\").innerHTML = this.content;\n\n\t\tthis.template.querySelector(\".close-alert\").addEventListener(\"click\", e => {\n\t\t\te.preventDefault();\n\t\t\tthis.close();\n\t\t});\n\t}\n\n\tshowIn(container) {\n\t\tif(!this.template){\n\t\t\treturn false;\n\t\t}\n\n\t\tif(this.isSingleton){\n\t\t\tcontainer.innerHTML = \"\";\n\t\t}\n\t\tcontainer.append(this.template);\n\t\tsetTimeout(() => {\n\t\t\tthis.template.classList.add(\"show\");\n\t\t}, 10);\n\n\t\treturn this;\n\t}\n\n\tclose() {\n\t\tthis.template.classList.remove(\"show\");\n\t\tsetTimeout(() => {\n\t\t\tthis.template.remove();\n\t\t\tdelete alertsList[this.id];\n\t\t}, 150);\n\t}\n\n\tchangeContent(newContent) {\n\t\tthis.template.querySelector(\".content\").innerHTML = newContent;\n\t}\n}\n\nconst closeAlertComponent = alertId => {\n\treturn alertsList[alertId]?.close();\n}\n\nconst createAlertComponent = (type, content, isSingleton, isClosable) => {\n\treturn new Alert(type, content, isSingleton, isClosable);\n}\n\nconst createGlobalAlertComponent = (type, content, isSingleton, isClosable) => {\n\tconst alert = createAlertComponent(type, content, isSingleton, isClosable);\n\talert.showIn(document.querySelector(\".global-alerts-container\"));\n\treturn alert;\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", e => {\n\tdocument.querySelectorAll(`.component.alert .close-alert`).forEach(item => {\n\t\titem.addEventListener(\"click\", e => {\n\t\t\te.preventDefault();\n\t\t\tconst alertId = e.currentTarget.getAttribute(\"data-close-alert-id\");\n\t\t\tcloseAlertComponent(alertId);\n\t\t});\n\t});\n});\n\nconst alertsList = {};","class App {\n\tconstructor() {\n\t\tthis.router = new Router(\".page-container\", \"home\", \"not-found\");\n\t\tthis.auth = new Auth(\"#login .login-form form\");\n\t\tthis.renderer = new Renderer();\n\t\tthis.postRender = new PostRender();\n\t\tthis.loader = new Loader();\n\t\tthis.cacheProvider = new CacheProvider();\n\t\tthis.storedPlayerDataManager = new StoredPlayerDataManager();\n\n\t\tsetTimeout(() => {\n\t\t\tthis.init();\n\t\t}, 10);\n\t}\n\n\tinit() {\n\t\tiniters(this);\n\t\tthis.router.urlMonitor();\n\n\t\tthis.initDisplayingAuthBtns();\n\t\tthis.initPreloadSpinner();\n\t\tthis.initBaseEvents();\n\t\tthis.initGenres();\n\t\tthis.initGoToTopBtn();\n\t}\n\n\tinitPreloadSpinner() {\n\t\tdocument.querySelectorAll(\".preload-spinner\").forEach(item => {\n\t\t\titem.innerHTML = this.renderer.renderPreloadSpinner();\n\t\t});\n\t}\n\n\tinitBaseEvents() {\n\t\tdocument.querySelector(\".logout-btn\").addEventListener(\"click\", e => {\n\t\t\tthis.auth.logout();\n\t\t});\n\n\t\tdocument.querySelector(\".btn-nav-on-mob-show\").addEventListener(\"click\", e => {\n\t\t\tif(e.currentTarget.classList.contains(\"active\")) {\n\t\t\t\thideMobNav();\n\t\t\t}else{\n\t\t\t\tshowMobNav();\n\t\t\t}\n\t\t});\n\n\t\tdocument.querySelector(`[name=\"search\"]`).addEventListener(\"keyup\", e => {\n\t\t\te.preventDefault();\n\t\t\tif(e.keyCode == 13) {\n\t\t\t\tlet squery = e.currentTarget.value.trim();\n\t\t\t\tdocument.location.hash = `page:search;sq:${squery}`;\n\t\t\t\te.currentTarget.blur();\n\t\t\t}\n\t\t});\n\n\t\tconst lmap = { \n\t\t\thome: this.loader.homePageUpToLoad, \n\t\t\tsearch: this.loader.searchPageUpToLoad, \n\t\t\tgenres: this.loader.genresPageUpToLoad \n\t\t};\n\t\tfor(let p in lmap) {\n\t\t\tconst page = document.querySelector(`#${p}`);\n\t\t\tpage.querySelector(`.more-btn`).addEventListener(\"click\", e => {\n\t\t\t\tconst renderContainer = page.querySelector(\".render-container\");\n\t\t\t\tconst pageNum = Math.ceil(renderContainer.childNodes.length / _CONF.perPage[p]) + 1;\n\t\t\t\tpage.querySelector(`.more-btn-wrap .preload-spinner`).classList.remove(\"dnone\");\n\t\t\t\tpage.querySelector(`.more-btn`).classList.add(\"dnone\");\n\n\t\t\t\tlmap[p](pageNum, resp => {\n\t\t\t\t\tpage.querySelector(`.more-btn-wrap .preload-spinner`).classList.add(\"dnone\");\n\t\t\t\t\tif(resp.list.length) {\n\t\t\t\t\t\tpage.querySelector(`.more-btn`).classList.remove(\"dnone\");\n\t\t\t\t\t}\n\t\t\t\t\tinsertListToRenderContainer(renderContainer, resp.list);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tinitGenres() {\n\t\tthis.loader.genresList(items => {\n\t\t\tdocument.querySelector(\"#genres .render-genres\").appendChild(this.renderer.renderGenresList(items).node);\n\t\t});\n\t}\n\n\tinitDisplayingAuthBtns() {\n\t\tif(getSessionId()) {\n\t\t\tdocument.querySelector(\".logout-btn\").classList.remove(\"dnone\");\n\t\t\tdocument.querySelector(\".go-login-page-btn\").classList.add(\"dnone\");\n\t\t} else {\n\t\t\tdocument.querySelector(\".logout-btn\").classList.add(\"dnone\");\n\t\t\tdocument.querySelector(\".go-login-page-btn\").classList.remove(\"dnone\");\n\t\t}\n\t}\n\n\tinitGoToTopBtn() {\n\t\tconst goTopBtn = document.querySelector(\".go-to-top\");\n\n\t\tconst goTopBtnVisibilityHandler = () => {\n\t\t\tif(window.pageYOffset > 500) {\n\t\t\t\tif(!goTopBtn.classList.contains(\"show\")) {\n\t\t\t\t\tgoTopBtn.classList.add(\"show\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif(goTopBtn.classList.contains(\"show\")) {\n\t\t\t\t\tgoTopBtn.classList.remove(\"show\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tgoTopBtnVisibilityHandler();\n\n\t\twindow.addEventListener(\"scroll\", e => {\n\t\t\tgoTopBtnVisibilityHandler();\n\t\t});\n\n\t\tgoTopBtn.addEventListener(\"click\", e => {\n\t\t\tconst duration = 50;\n\t\t\tconst step = Math.round(window.pageYOffset / duration);\n\n\t\t\tconst animationInterval = setInterval(() => {\n\t\t\t\tconst newPageYOffset = Math.max(0, window.pageYOffset - step);\n\n\t\t\t\twindow.scrollTo({\n\t\t\t\t\ttop: newPageYOffset \n\t\t\t\t});\n\n\t\t\t\tif(!newPageYOffset) {\n\t\t\t\t\treturn clearInterval(animationInterval);\n\t\t\t\t}\n\t\t\t}, 1);\n\t\t});\n\t}\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", e => {\n\tconst app = new App();\n\twindow.app = () => app;\n});","class Auth {\n\tconstructor(formSelector) {\n\t\tthis.formSelector = formSelector;\n\t\tthis.form = document.querySelector(this.formSelector);\n\t\tthis.submitBtn = this.form.querySelector(\".submit-btn\");\n\t\tthis.initForm();\n\t}\n\n\tinitForm() {\n\t\tthis.form.addEventListener(\"submit\", e => {\n\t\t\te.preventDefault();\n\t\t\tif(this.submitBtn.classList.contains(\"disable\")) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.submitBtn.classList.add(\"disable\");\n\n\t\t\tconst email = this.form.querySelector(\"#email\").value;\n\t\t\tconst passwd = this.form.querySelector(\"#passwd\").value;\n\n\t\t\tconst xhr = new XMLHttpRequest();\n\t\t\txhr.open(\"POST\", \"https://www.anilibria.tv/public/login.php\");\n\t\t\txhr.onload = () => {\n\t\t\t\tthis.submitBtn.classList.remove(\"disable\");\n\n\t\t\t\tif(xhr.status == 200) {\n\t\t\t\t\tconst resp = JSON.parse(xhr.response);\n\t\t\t\t\tif(resp.err == \"ok\") {\n\t\t\t\t\t\tlocalStorage.setItem(\"sessionId\", resp.sessionId);\n\t\t\t\t\t\tconst alert = createGlobalAlertComponent(\"success\", \"Успешно!\");\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\talert.close();\n\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\tdocument.location.hash = \"#\";\n\t\t\t\t\t\tdocument.querySelector(\".logout-btn\").classList.remove(\"dnone\");\n\t\t\t\t\t\tdocument.querySelector(\".go-login-page-btn\").classList.add(\"dnone\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst alert = createGlobalAlertComponent(\"danger\", resp.mes);\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\talert.close();\n\t\t\t\t\t\t}, 4500);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst alert = createGlobalAlertComponent(\"danger\", \"Сервер не доступен\");\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\talert.close();\n\t\t\t\t\t}, 4500);\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\n\t\t\tconst fdata = new FormData();\n\t\t\tfdata.append(\"mail\", email);\n\t\t\tfdata.append(\"passwd\", passwd);\n\t\t\tfdata.append(\"fa2code\", \"\");\n\t\t\tfdata.append(\"csrf\", \"1\");\n\t\t\txhr.send(fdata);\n\t\t});\n\t}\n\n\tlogout() {\n\t\tlocalStorage.removeItem(\"sessionId\");\n\t\tdocument.location.hash = \"#page:login\";\n\t\tdocument.querySelector(\".logout-btn\").classList.add(\"dnone\");\n\t\tdocument.querySelector(\".go-login-page-btn\").classList.remove(\"dnone\");\n\t\tapp().cacheProvider.unsetCache(\"favouritesList\");\n\t}\n}","class CacheProvider {\n\tconstructor() {\n\t\tthis.cache = {};\n\t\tthis.lifetime = {};\n\t\tthis.createAt = {};\n\n\t\tthis.init();\n\t\tsetInterval(() => {\n\t\t\tthis.manager();\n\t\t}, 1000);\n\t}\n\n\tinit() {\n\t\tlet storage = localStorage.getItem(\"cache\");\n\t\tif(storage) {\n\t\t\tstorage = JSON.parse(storage);\n\t\t\tthis.cache = storage.cache;\n\t\t\tthis.lifetime = storage.lifetime;\n\t\t\tthis.createAt = storage.createAt;\n\t\t}\n\t}\n\n\tsetCache(key, data, lifetime) {\n\t\tthis.cache[key] = data;\n\t\tthis.lifetime[key] = lifetime;\n\t\tthis.createAt[key] = Math.round((new Date()).getTime() / 1000);\n\n\t\tthis.saveCache();\n\t}\n\n\tsaveCache() {\n\t\tlocalStorage.setItem(\"cache\", JSON.stringify({\n\t\t\tcache: this.cache,\n\t\t\tlifetime: this.lifetime,\n\t\t\tcreateAt: this.createAt\n\t\t}));\n\t}\n\n\tcacheable(key, code, callback, lifetime) {\n\t\tif(this.cache[key]) {\n\t\t\treturn callback(this.cache[key]);\n\t\t}\n\n\t\tcode(data => {\n\t\t\tthis.setCache(key, data, lifetime);\n\t\t\tcallback(data);\n\t\t});\n\t}\n\n\tunsetCache(key) {\n\t\tif(this.cache[key]) {\n\t\t\tdelete this.cache[key] \n\t\t\tdelete this.lifetime[key] \n\t\t\tdelete this.createAt[key]\n\t\t\tthis.saveCache();\n\t\t}\n\t}\n\n\tmanager() {\n\t\tconst currentTimestamp = Math.round((new Date()).getTime() / 1000);\n\n\t\tfor(let key in this.cache) {\n\t\t\tif(!this.lifetime[key]) \n\t\t\t\tcontinue;\n\n\t\t\tif(currentTimestamp - this.createAt[key] > this.lifetime[key]) {\n\t\t\t\tthis.unsetCache(key);\n\t\t\t}\n\t\t}\n\t}\n}","class Loader {\n\tconstructor() {}\n\n\thomePageUpToLoad(pageNum, callback) {\n\t\tanilibriaRequest(\n\t\t\t\"title/updates\", \n\t\t\t{\n\t\t\t\tpage: pageNum,\n\t\t\t\titems_per_page: _CONF.perPage.home,\n\t\t\t\tfilter: getItemCardFields()\n\t\t\t}, \n\t\t\tresp => callback(resp)\n\t\t);\n\t}\n\n\tsearchPageUpToLoad(pageNum, callback) {\n\t\tlet squery = decodeURI(document.location.hash.split(\"sq:\")[1]);\n\n\t\tanilibriaRequest(\n\t\t\t\"title/search\", \n\t\t\t{\n\t\t\t\tpage: pageNum,\n\t\t\t\titems_per_page: _CONF.perPage.search,\n\t\t\t\tfilter: getItemCardFields(),\n\t\t\t\tsearch: squery\n\t\t\t}, \n\t\t\tresp => callback(resp)\n\t\t);\n\t}\n\n\tgenresPageUpToLoad(pageNum, callback) {\n\t\tconst selectedGenres = getSelectedGenres();\n\n\t\tanilibriaRequest(\n\t\t\t\"title/search\", \n\t\t\t{\n\t\t\t\tsearch: \"\",\n\t\t\t\tfilter: getItemCardFields(),\n\t\t\t\tgenres: selectedGenres.join(\",\"),\n\t\t\t\tpage: pageNum,\n\t\t\t\titems_per_page: _CONF.perPage.search,\n\t\t\t}, \n\t\t\tresp => callback(resp)\n\t\t);\n\t}\n\n\tfavouritesList(callback) {\n\t\tconst sessId = getSessionId();\n\t\tif(!sessId) {\n\t\t\treturn setTimeout(() => document.location.hash = \"#page:login\", 20);\n\t\t}\n\n\t\tapp().cacheProvider.cacheable(\n\t\t\t\"favouritesList\", \n\t\t\tcacheableCallback => {\n\t\t\t\tanilibriaRequest(\n\t\t\t\t\t\"v2.13:getFavorites\", \n\t\t\t\t\t{\n\t\t\t\t\t\tsession: sessId,\n\t\t\t\t\t\tlimit: 100,\n\t\t\t\t\t\tfilter: getItemCardFields(true),\n\t\t\t\t\t}, \n\t\t\t\t\tresp => cacheableCallback(resp)\n\t\t\t\t);\n\t\t\t}, \n\t\t\tcallback,\n\t\t\t60 * 5\n\t\t);\n\t}\n\n\tgenresList(callback) {\n\t\tapp().cacheProvider.cacheable(\n\t\t\t\"genresList\",\n\t\t\tcacheableCallback => {\n\t\t\t\tanilibriaRequest(\n\t\t\t\t\t\"genres\", \n\t\t\t\t\t{\n\t\t\t\t\t\tsorting_type: 1\n\t\t\t\t\t}, \n\t\t\t\t\tresp => cacheableCallback(resp)\n\t\t\t\t);\n\t\t\t},\n\t\t\tcallback,\n\t\t\t60 * 60 * 3\n\t\t);\n\t}\n\n\tscheduleList(callback) {\n\t\tapp().cacheProvider.cacheable(\n\t\t\t\"scheduleList\",\n\t\t\tcacheableCallback => {\n\t\t\t\tanilibriaRequest(\n\t\t\t\t\t\"title/schedule\", \n\t\t\t\t\t{\n\t\t\t\t\t\tfilter: getItemCardFields()\n\t\t\t\t\t}, \n\t\t\t\t\tcacheableCallback\n\t\t\t\t);\n\t\t\t},\n\t\t\tcallback,\n\t\t\t60 * 60 * 3\n\t\t);\n\t}\n}","class PostRender {\n\tconstructor() {}\n\n\titemCard(html) {\n\t\tconst item = nodeFromHTML(html);\n\n\t\titem.querySelector(\".thumbnail-img\").addEventListener(\"load\", e => {\n\t\t\te.currentTarget.parentNode.parentNode.classList.add(\"load-ready\");\n\t\t});\n\n\t\treturn item;\n\t}\n\n\tsingle(html, post) {\n\t\tconst item = nodeFromHTML(html);\n\t\tconst tabs = this.tabs(app().renderer.renderTabs({\n\t\t\tname: \"video\",\n\t\t\ttabs: {\n\t\t\t\t\"player-container\": {\n\t\t\t\t\tbtn: `<span class=\"mdi mdi-television-play\"></span> Смотреть`,\n\t\t\t\t\tcontent: `<div class=\"player\" id=\"main-player-${post.id}\"></div>`\n\t\t\t\t},\n\t\t\t\t\"torrents-container\": {\n\t\t\t\t\tbtn: `<span class=\"mdi mdi-download\"></span> Скачать`,\n\t\t\t\t\tcontent: app().renderer.renderTorrents(post)\n\t\t\t\t}\n\t\t\t},\n\t\t\tactive: \"player-container\"\n\t\t}));\n\n\t\titem.querySelector(\".video-container\").appendChild(tabs);\n\n\t\tconst playerData = {\n\t\t\tid: \"main-player-\" + post.id,\n\t\t\tdefault_quality: \"720p\",\n\t\t\tpreroll_deny: \"\",\n\t\t\tfile: []\n\t\t};\n\n\t\tfor(let i in post.player.list) {\n\t\t\tlet files = `[480p]https://${post.player.host}${post.player.list[i].hls.sd}`;\n\n\t\t\tif(post.player.list[i].hls.hd) {\n\t\t\t\tfiles += `,[720p]https://${post.player.host}${post.player.list[i].hls.hd}`;\n\t\t\t}\n\n\t\t\tif(post.player.list[i].hls.fhd) {\n\t\t\t\tfiles += `,[1080p]https://${post.player.host}${post.player.list[i].hls.fhd}`;\n\t\t\t}\n\n\t\t\tplayerData.file.push({\n\t\t\t\tid: \"s\" + i,\n\t\t\t\tskip: post.player.list[i].skips.opening.length ? post.player.list[i].skips.opening.join(\"-\") : null,\n\t\t\t\ttitle: `Серия ${i}`,\n\t\t\t\tposter: post.player.list[i].preview ? `//${_CONF.domen}${post.player.list[i].preview}` : null,\n\t\t\t\tdownload: null,\n\t\t\t\tfile: files\n\t\t\t});\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tlet player = new Playerjs(playerData);\n\t\t}, 30);\n\n\t\titem.querySelector(\".fav-btn-wrap\").appendChild(app().renderer.renderFavoriteBtn(post).node);\n\n\t\titem.querySelector(\".thumbnail-img\").addEventListener(\"load\", e => {\n\t\t\te.currentTarget.parentNode.classList.add(\"load-ready\");\n\t\t});\n\n\t\treturn item;\n\t}\n\n\tfavoriteBtn(html, postId) {\n\t\tconst item = nodeFromHTML(html);\n\n\t\tconst sessId = getSessionId();\n\t\tif(sessId) {\n\t\t\titem.querySelector(\".state.unset-from\").classList.add(\"dnone\");\n\t\t\titem.querySelector(\".state.set-to\").classList.remove(\"dnone\");\n\n\t\t\tapp().loader.favouritesList(resp => {\n\t\t\t\tfor(let i=0; i<resp.length; i++) {\n\t\t\t\t\tif(postId == resp[i].id) {\n\t\t\t\t\t\titem.querySelector(\".state.unset-from\").classList.remove(\"dnone\");\n\t\t\t\t\t\titem.querySelector(\".state.set-to\").classList.add(\"dnone\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\titem.classList.remove(\"dnone\");\n\t\t\t});\n\t\t\t\n\t\t\titem.addEventListener(\"click\", e => {\n\t\t\t\tif(e.currentTarget.querySelector(\".unset-from\").classList.contains(\"dnone\")) {\n\t\t\t\t\taddToFavourites(postId, resp => {\n\t\t\t\t\t\titem.querySelector(\".state.unset-from\").classList.remove(\"dnone\");\n\t\t\t\t\t\titem.querySelector(\".state.set-to\").classList.add(\"dnone\");\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tremoveFromFavourites(postId, resp => {\n\t\t\t\t\t\titem.querySelector(\".state.unset-from\").classList.add(\"dnone\");\n\t\t\t\t\t\titem.querySelector(\".state.set-to\").classList.remove(\"dnone\");\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn item;\n\t}\n\n\tgenreBtn(html) {\n\t\tconst item = nodeFromHTML(html);\n\n\t\titem.addEventListener(\"click\", e => {\n\t\t\te.preventDefault();\n\t\t\tconst genre = e.currentTarget.getAttribute(\"data-genre-name\");\n\t\t\tlet selectedGenres = document.location.hash.split(\"sg:\")[1];\n\t\t\tselectedGenres = selectedGenres \n\t\t\t\t? selectedGenres.split(\",\").map(item => { return decodeURI(item); }) \n\t\t\t\t: [];\n\n\t\t\tconst inx = selectedGenres.indexOf(genre);\n\t\t\tif(inx === -1) {\n\t\t\t\tselectedGenres.push(genre);\n\t\t\t\te.currentTarget.classList.add(\"active\");\n\t\t\t} else {\n\t\t\t\tselectedGenres.splice(inx, 1);\n\t\t\t\te.currentTarget.classList.remove(\"active\");\n\t\t\t}\n\n\t\t\tdocument.location.hash = \"page:genres;sg:\" + selectedGenres.join(\",\");\n\t\t});\n\n\t\treturn item;\n\t}\n\n\ttabs(html) {\n\t\tconst item = nodeFromHTML(html);\n\n\t\titem.querySelectorAll(\".tabs-nav .tab\").forEach(i => {\n\t\t\ti.addEventListener(\"click\", e => {\n\t\t\t\titem.querySelector(\".tabs-nav .tab.active\").classList.remove(\"active\");\n\t\t\t\titem.querySelector(\".tabs-content .tab-content.active\").classList.remove(\"active\");\n\n\t\t\t\tconst tabName = e.currentTarget.getAttribute(\"data-tab\");\n\t\t\t\te.currentTarget.classList.add(\"active\");\n\t\t\t\titem.querySelector(`.tab-content[data-tab=\"${tabName}\"]`).classList.add(\"active\");\n\t\t\t});\n\t\t});\n\n\t\treturn item;\n\t}\n}","class Renderer {\n\tconstructor() {}\n\n\trenderThumbnail(post) {\n\t\tlet status = post.status.string ? post.status.string : \"Завершен\";\n\t\tif(post.inSchedule) {\n\t\t\tif(post.inSchedule.isToday) {\n\t\t\t\tstatus = `<span class=\"mdi mdi-flag-checkered\"></span> Сегодня`;\n\t\t\t} else {\n\t\t\t\tstatus = `<span class=\"mdi mdi-flag-checkered\"></span> ${(post.inSchedule.string.charAt(0).toUpperCase() + post.inSchedule.string.slice(1))}`;\n\t\t\t}\n\t\t}\n\n\t\tconst watched = (post.localPlayerData && post.localPlayerData.currentEpisode == post.player.episodes.last)\n\t\t\t? `<div class=\"thumb-label watched\">Просмотрено</div>`\n\t\t\t: \"\"\n\n\t\treturn `\n\t\t\t<div class=\"component thumbnail\">\n\t\t\t\t<img src=\"//anilibria.tv${post.posters.medium.url}\" class=\"thumbnail-img\">\n\t\t\t\t<img \n\t\t\t\t\tsrc=\"data:image/jpeg;base64,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\" \n\t\t\t\t\tclass=\"poster-placeholder\"\n\t\t\t\t>\n\t\t\t\t<div class=\"hover-effect\">\n\t\t\t\t\t<span class=\"mdi mdi-arrow-right\"></span>\n\t\t\t\t</div>\n\t\t\t\t${watched}\n\t\t\t\t<div class=\"thumb-label status\">${status}</div>\n\t\t\t\t<div class=\"thumb-label series\">Серий ${post.player.episodes.last}</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderItemCard(post) {\n\t\tlet genres = post.genres.join(\", \");\n\t\tconst thumb = this.renderThumbnail(post);\n\n\t\tlet html = `<a href=\"#page:single;id${post.id}\" class=\"no-decoration item-link\">\n\t\t\t<div class=\"component card item-card\" data-id=\"${post.id}\">\n\t\t\t\t${thumb}\n\t\t\t\t<div class=\"info\">\n\t\t\t\t\t<div class=\"title\">${post.names.ru} (<span class=\"year\">${post.season.year}</span>)</div>\n\t\t\t\t\t<div class=\"meta\">\n\t\t\t\t\t\t<div class=\"genres\">${genres}</div>\n\t\t\t\t\t\t<div class=\"type\">${post.type.full_string}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</a>`;\n\n\t\treturn {\n\t\t\tstring: html,\n\t\t\tnode: app().postRender.itemCard(html)\n\t\t};\n\t}\n\n\trenderTorrents(post) {\n\t\tlet html = `<div class=\"component torrents\">`;\n\n\t\tfor(let i=0; i<post.torrents.list.length; i++) {\n\t\t\tconst torrent = post.torrents.list[i];\n\t\t\tlet size = torrent.total_size / 1024 / 1024;\n\t\t\tsize = (size > 1024) \n\t\t\t\t? (size / 1024).toString().split(\".\")[0] + \".\" + (size / 1024).toString().split(\".\")[1].substr(0,2) + \" ГБ\" \n\t\t\t\t: size.toString().split(\".\")[0] + \".\" +  size.toString().split(\".\")[1].substr(0,2) + \" МБ\";\n\t\t\thtml += `\n\t\t\t\t<div class=\"torrent\" data-torrent-id=\"${torrent.torrent_id}\">\n\t\t\t\t\t<div class=\"series\">Серии ${torrent.episodes.string}</div>\n\t\t\t\t\t<div class=\"quality\">${torrent.quality.string}</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"seed-leech\">\n\t\t\t\t\t\t<span class=\"seed\">\n\t\t\t\t\t\t\t<span class=\"mdi mdi-arrow-up\"></span>\n\t\t\t\t\t\t\t${torrent.seeders}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"leech\">\n\t\t\t\t\t\t\t<span class=\"mdi mdi-arrow-down\"></span>\n\t\t\t\t\t\t\t${torrent.leechers}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"download\">\n\t\t\t\t\t\t<a href=\"//anilibria.tv${torrent.url}\" class=\"std-btn btn-success\" target=\"_blank\">\n\t\t\t\t\t\t\t<span class=\"mdi mdi-download\"></span>\n\t\t\t\t\t\t\t<span class=\"btn-label\">Скачать</span>\n\t\t\t\t\t\t\t<span class=\"btn-tsize\">${size}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\thtml += \"</div>\";\n\t\treturn html;\n\t}\n\n\trenderFavoriteBtn(post) {\n\t\tconst html = `<button class=\"std-btn btn-warning fav-btn dnone\" data-id=\"${post.id}\">\n\t\t\t<span class=\"state unset-from\">\n\t\t\t\t<span class=\"mdi mdi-star\"></span>\n\t\t\t\tВ избранном\n\t\t\t</span>\n\t\t\t<span class=\"state set-to\">\n\t\t\t\t<span class=\"mdi mdi-star-outline\"></span>\n\t\t\t\tДобавить в избранное\n\t\t\t</span>\n\t\t</button>`;\n\n\t\treturn {\n\t\t\thtml: html,\n\t\t\tnode: app().postRender.favoriteBtn(html, post.id)\n\t\t};\n\t}\n\n\trenderTabs(props) {\n\t\tlet nav = `<div class=\"tabs-nav\">`;\n\t\tlet content = `<div class=\"tabs-content\">`;\n\t\tfor(let tabName in props.tabs) {\n\t\t\tconst active = (props.active == tabName) ? \"active\" : \"\";\n\t\t\tnav += `<div class=\"tab ${active}\" data-tab=\"${tabName}\">${props.tabs[tabName].btn}</div>`;\n\t\t\tcontent += `<div class=\"tab-content ${tabName} ${active}\" data-tab=\"${tabName}\">${props.tabs[tabName].content}</div>`;\n\t\t}\n\t\tnav += `</div>`;\n\t\tcontent += `</div>`;\n\n\t\tlet html = `<div class=\"component tabs ${props.name}\" id=\"${props.name}\">\n\t\t\t${nav}\n\t\t\t${content}\n\t\t</div>`;\n\t\t\n\t\treturn html;\n\t}\n\n\trenderSingle(post) {\n\t\tlet genres = this.renderGenresList(post.genres).html;\n\t\tconst thumb = this.renderThumbnail(post);\n\t\tconst voices = post.team.voice.join(\", \");\n\t\tconst schedule = post.inSchedule \n\t\t\t? `<div class=\"\"><span class=\"mdi mdi-flag-checkered\"></span> Новая серия: ${(post.inSchedule.isToday ? \"сегодня\" : post.inSchedule.string)}</div>` \n\t\t\t: \"\";\n\n\t\tlet html = `<div class=\"component single-item\">\n\t\t\t<div class=\"std-row\">\n\t\t\t\t${thumb}\n\t\t\t\t<div class=\"item-info\">\n\t\t\t\t\t<h2 class=\"title\"><strong>${post.names.ru}</strong> / ${post.names.en}</h2>\n\t\t\t\t\t<div class=\"time-period\">${post.season.string || \"\"} ${post.season.year}</div>\n\t\t\t\t\t<div class=\"genres\">${genres}</div>\n\t\t\t\t\t<div class=\"type\">${post.type.full_string}</div>\n\t\t\t\t\t${schedule}\n\t\t\t\t\t<div class=\"team\">\n\t\t\t\t\t\t<div class=\"voice\">\n\t\t\t\t\t\t\t<strong>Голоса:</strong>\n\t\t\t\t\t\t\t${voices}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"description\">${post.description}</div>\n\t\t\t\t\t<div class=\"control-panel\">\n\t\t\t\t\t\t<div class=\"fav-btn-wrap\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"video-container\"></div>\n\t\t</div>`;\n\n\t\treturn {\n\t\t\tstring: html,\n\t\t\tnode: app().postRender.single(html, post)\n\t\t};\n\t}\n\n\trenderPreloadSpinner() {\n\t\treturn `<div class=\"loadingio-spinner-dual-ball-9pyhqeozhs\"><div class=\"ldio-jyt13pqa73\">\n\t\t\t<div></div><div></div><div></div>\n\t\t\t</div></div>`;\n\t}\n\n\trenderGenreBtn(genre) {\n\t\tlet html = `<a \n\t\t\thref=\"#page:genres;sg:${genre}\" \n\t\t\tclass=\"std-btn genre-btn\" \n\t\t\tdata-genre-name=\"${genre}\"\n\t\t>\n\t\t\t${genre}\n\t\t</a>`;\n\n\t\treturn {\n\t\t\thtml: html,\n\t\t\tnode: app().postRender.genreBtn(html)\n\t\t};\n\t}\n\n\trenderGenresList(genres) {\n\t\tlet container = document.createElement(\"DIV\");\n\t\tcontainer.classList.add(\"genres-wrap\");\n\t\tlet html = `<div class=\"genres-wrap\">`;\n\t\tfor(let i=0; i<genres.length; i++) {\n\t\t\tconst btn = this.renderGenreBtn(genres[i]);\n\t\t\tcontainer.appendChild(btn.node);\n\t\t\thtml += btn.html;\n\t\t}\n\n\t\thtml += \"</div>\";\n\n\t\treturn {\n\t\t\thtml: html,\n\t\t\tnode: container\n\t\t};\n\t}\n}","class Router {\n\tconstructor(pagesContainerSelector, defaultPageId, notFoundPageId) {\n\t\tthis.containerSelector = pagesContainerSelector;\n\t\tthis.container = document.querySelector(this.containerSelector);\n\t\tthis.defaultPageId = defaultPageId;\n\t\tthis.notFoundPageId = notFoundPageId;\n\t\tthis.initers = {};\n\t\tconst findedPages = this.container.querySelectorAll(\".page[id]\");\n\n\t\tthis.pages = {};\n\t\tfor(let i=0; i<findedPages.length; i++) {\n\t\t\tthis.pages[findedPages[i].getAttribute(\"id\")] = findedPages[i];\n\t\t}\n\n\t\tthis.currentPage = \"default-val\";\n\t\tthis.currentPath = \"default-val\";\n\t\tthis.zindex = 1;\n\t}\n\n\tgoToPage(pageId) {\n\t\tif(typeof pageId == \"undefined\") {\n\t\t\treturn document.location.hash = `page:${this.defaultPageId}`;\n\t\t}\n\n\t\tif(typeof this.pages[pageId] == \"undefined\") {\n\t\t\treturn this.goToPage(this.notFoundPageId);\n\t\t}\n\n\t\tthis.container.querySelectorAll(\".page.show\").forEach( p => {\n\t\t\treturn p.classList.remove(\"show\");\n\t\t} );\n\n\t\tif(typeof this.pages[pageId] != \"undefined\") {\n\t\t\tthis.initers[\"_page\"] && this.initers[\"_page\"](this, pageId);\n\t\t\tthis.initers[pageId] && this.initers[pageId](this);\n\t\t\tthis.pages[pageId].style.zIndex = this.zindex;\n\t\t\tthis.zindex++;\n\t\t}\n\n\t\tthis.pages[pageId]?.classList.add(\"show\");\n\t\twindow.scrollTo({ top: 0 });\n\t\tthis.currentPage = pageId;\n\t\tthis.currentPath = document.location.hash;\n\t}\n\n\turlMonitor() {\n\t\tsetInterval(() => {\n\t\t\tconst route = document.location.hash.split(\"page:\")[1];\n\t\t\tif(document.location.hash != this.currentPath) {\n\t\t\t\tthis.goToPage(route?.split(\";\")[0]);\n\t\t\t}\n\t\t}, 10);\n\t}\n\n\tinitPage(pageName, callback) {\n\t\tthis.initers[pageName] = callback;\n\t}\n}","class StoredPlayerDataManager {\n\tconstructor() {\n\t\tthis.localStorageItemName = \"player_data_backup\";\n\t\t\n\t\tthis.restorePlayerDataFromBackup();\n\t\tthis.cleanupBackupedPlayerData();\n\n\t\tsetInterval(() => {\n\t\t\tthis.backupPlayerData();\n\t\t}, 3000);\n\t\t\n\t\tsetInterval(() => {\n\t\t\tthis.cleanupBackupedPlayerData();\n\t\t}, 5 * 60 * 1000);\n\t}\n\n\tbackupPlayerData() {\n\t\tconst playerData = getStorablePlayerData();\n\t\tconst bPlayerData = this.getBackupedPlayerData();\n\t\tfor(let id in playerData) {\n\t\t\tif(bPlayerData[id]) {\n\t\t\t\tbPlayerData[id].currentEpisode = playerData[id].currentEpisode;\n\t\t\t\tbPlayerData[id].timing.watched = playerData[id].timing.watched;\n\t\t\t\tbPlayerData[id].timing.len = playerData[id].timing.len;\n\t\t\t} else {\n\t\t\t\tbPlayerData[id] = playerData[id];\n\t\t\t}\n\t\t}\n\n\t\tlocalStorage.setItem(this.localStorageItemName, JSON.stringify(bPlayerData));\n\t}\n\n\tgetBackupedPlayerData() {\n\t\tconst backupedPlayerData = localStorage.getItem(this.localStorageItemName);\n\t\tif(!backupedPlayerData) {\n\t\t\treturn {};\n\t\t}\n\n\t\treturn JSON.parse(backupedPlayerData);\n\t}\n\n\trestorePlayerDataFromBackup() {\n\t\tconst playerData = this.getBackupedPlayerData();\n\t\tconst path = document.location.host + document.location.pathname;\n\t\tconst timestamp = (new Date()).getTime();\n\n\t\tfor(let id in playerData) {\n\t\t\tconst episode = playerData[id].currentEpisode;\n\t\t\tconst watched = playerData[id].timing.watched;\n\t\t\tconst len = playerData[id].timing.len || 0;\n\t\t\tconst data = `{x-${(episode-1)}-s${episode}}${watched}.0--${len}.0--${timestamp}`;\n\t\t\tlocalStorage.setItem(`pljsplayfrom_main-player-${id}${path}`, data);\n\t\t}\n\t}\n\n\tcleanupBackupedPlayerData() {\n\t\tconst playerData = this.getBackupedPlayerData();\n\t\tlet length = Object.keys(playerData).length;\n\t\tif(length <= 300) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet ID = -1;\n\t\tlet watchedAt = Number.MAX_VALUE;\n\t\tfor(let id in playerData) {\n\t\t\tif(playerData[id].timing.watchedAt < watchedAt) {\n\t\t\t\tID = id;\n\t\t\t\twatchedAt = playerData[id].timing.watchedAt;\n\t\t\t}\n\t\t}\n\n\t\tplayerData[ID] && delete playerData[ID];\n\t\tlocalStorage.setItem(this.localStorageItemName, JSON.stringify(playerData));\n\t}\n}","const _CONF = {\n\tdomen: \"anilibria.tv\",\n\tapi: {\n\t\tdomen: \"api.anilibria.tv\",\n\t\tver: \"v3\"\n\t},\n\n\tperPage: {\n\t\thome: 20,\n\t\tsearch: 20,\n\t\tgenres: 20\n\t},\n\t\n\tnumbOfRelevant: 12\n};","const getSessionId = () => {\n\tconst sessId = localStorage.getItem(\"sessionId\");\n\tif(sessId) {\n\t\treturn sessId;\n\t}\n\n\treturn false;\n};\n\nconst stdXHR = (method, url, onloadCallback) => {\n\tconst xhr = new XMLHttpRequest();\n\txhr.open(method, url);\n\txhr.setRequestHeader(\"Cache-Control\", \"no-cache, no-store, max-age=0\");\n\n\txhr.onload = () => {\n\t\tif(xhr.status == 200) {\n\t\t\tonloadCallback(xhr);\n\t\t} else {\n\t\t\tif(xhr.status == 404) {\n\t\t\t\tapp().router.goToPage(\"not-found\");\n\t\t\t}\n\t\t\tconst alert = createGlobalAlertComponent(\"danger\", \"Ошибка загрузки данных\");\n\t\t\tsetTimeout(() => alert.close(), 3000);\n\t\t}\n\t}\n\n\txhr.onerror = () => {\n\t\tconst alert = createGlobalAlertComponent(\"danger\", \"Сервер не доступен\");\n\t\tsetTimeout(() => alert.close(), 3000);\n\t}\n\n\treturn xhr;\n}\n\nconst showMobNav = () => {\n\tdocument.querySelector(\".btn-nav-on-mob-show\").classList.add(\"active\");\n\tdocument.querySelectorAll(\".navigation-main-wrapper, .userbar-wrapper\").forEach(item => {\n\t\titem.classList.add(\"show\");\n\t});\n}\n\nconst hideMobNav = () => {\n\tdocument.querySelector(\".btn-nav-on-mob-show\").classList.remove(\"active\");\n\tdocument.querySelectorAll(\".navigation-main-wrapper, .userbar-wrapper\").forEach(item => {\n\t\titem.classList.remove(\"show\");\n\t});\n}\n\nconst makeSelectedGenresActivated = () => {\n\tlet selectedGenres = document.location.hash.split(\"sg:\")[1];\n\tselectedGenres = selectedGenres \n\t\t? selectedGenres.split(\",\").map(item => { return decodeURI(item); }) \n\t\t: [];\n\tdocument.querySelectorAll(\"#genres .render-genres .genre-btn.active\").forEach(\n\t\ti => i.classList.remove(\"active\")\n\t);\n\tfor(let i=0; i<selectedGenres.length; i++) {\n\t\tdocument.querySelector(`#genres .render-genres .genre-btn[data-genre-name=\"${selectedGenres[i]}\"]`)?.classList.add(\"active\");\n\t}\n}\n\nconst getItemCardFields = (api2Flag) => {\n\treturn (api2Flag === true) \n\t? [ \n\t\t\t\"id\", \n\t\t\t\"code\", \n\t\t\t\"names\", \n\t\t\t\"genres\", \n\t\t\t\"posters\", \n\t\t\t\"status\", \n\t\t\t\"player\", \n\t\t\t\"season\", \n\t\t\t\"type\" \n\t\t]\n\t: [ \n\t\t\t\"id\", \n\t\t\t\"code\", \n\t\t\t\"names\", \n\t\t\t\"genres\", \n\t\t\t\"posters.medium.url\", \n\t\t\t\"status\", \n\t\t\t\"player.episodes\", \n\t\t\t\"season\", \n\t\t\t\"type\" \n\t\t]\n}\n\nconst setPageTitle = pageTitle => {\n\tdocument.querySelector(\"head title\").innerHTML = pageTitle;\n}\n\nconst nodeFromHTML = html => {\n\tconst container = document.createElement(\"DIV\");\n\tcontainer.innerHTML = html;\n\treturn item = container.childNodes[0];\n}\n\nconst addToFavourites = (postId, callback) => {\n\tconst sessId = getSessionId();\n\tif(sessId) {\n\t\tanilibriaRequest(\n\t\t\t\"user/favorites\",\n\t\t\t{\n\t\t\t\tsession: sessId,\n\t\t\t\ttitle_id: postId\n\t\t\t},\n\t\t\tresp => { \n\t\t\t\tapp().cacheProvider.unsetCache(\"favouritesList\");\n\t\t\t\tcallback(resp);\n\t\t\t},\n\t\t\t\"PUT\"\n\t\t);\n\t}\n}\n\nconst removeFromFavourites = (postId, callback) => {\n\tconst sessId = getSessionId();\n\tif(sessId) {\n\t\tanilibriaRequest(\n\t\t\t\"user/favorites\",\n\t\t\t{\n\t\t\t\tsession: sessId,\n\t\t\t\ttitle_id: postId\n\t\t\t},\n\t\t\tresp => {\n\t\t\t\tapp().cacheProvider.unsetCache(\"favouritesList\");\n\t\t\t\tcallback(resp);\n\t\t\t},\n\t\t\t\"DELETE\"\n\t\t);\n\t}\n}\n\nconst insertListToRenderContainer = (renderContainer, list) => {\n\tfor(let i = 0; i < list.length; i++) {\n\t\trenderContainer.appendChild(app().renderer.renderItemCard(list[i]).node);\n\t}\n}\n\nconst anilibriaRequest = (name, params, callback, method) => {\n\tparams = params || {};\n\n\tmethod = method || \"GET\";\n\tlet ver = _CONF.api.ver;\n\tif(name.indexOf(\":\") != -1) {\n\t\t[ver, name] = name.split(\":\");\n\t}\n\n\tlet url = `//${_CONF.api.domen}/api/${ver}/${name}`;\n\t\n\tif(params[\"filter\"]) {\t\n\t\tparams.filter = params.filter.join(\",\");\n\t}\n\n\tif(params[\"after\"] === 0) {\n\t\tdelete params[\"after\"];\n\t}\n\n\tconst query = (new URLSearchParams(params)).toString();\n\tif(query) {\n\t\turl += `?${query}`;\n\t}\n\n\tstdXHR(method, url,\n\t\txhr => {\n\t\t\tconst resp = JSON.parse(xhr.response);\n\t\t\tcallback(resp);\n\t\t}\n\t).send();\n}\n\nconst getSelectedGenres = () => {\n\tlet genres = document.location.hash.split(\"sg:\")[1];\n\tgenres = decodeURI(genres);\n\treturn genres.length ? genres.split(\",\") : [];\n}\n\nconst getStorablePlayerData = () => {\n\tconst data = {};\n\tconst keys = Object.keys(localStorage);\n\n\tfor(let key of keys) {\n\t\tif(key.indexOf(\"pljsplayfrom_main-player-\") == -1) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst id = parseInt(key.split(\"pljsplayfrom_main-player-\")[1]);\n\t\tlet val = localStorage.getItem(key);\n\t\t[watched, len, watchedAt] = val.split(\"}\")[1].split(\"--\");\n\t\tdata[id] = {\n\t\t\tcurrentEpisode: val.split(\"}\")[0].split(\"s\")[1],\n\t\t\ttiming: {\n\t\t\t\twatched: parseInt(watched),\n\t\t\t\tlen: parseInt(len),\n\t\t\t\twatchedAt: watchedAt\n\t\t\t}\n\t\t};\n\t}\n\n\treturn data;\n}\n\nconst transformScheduleList = schedule => {\n\tconst resultList = {};\n\tconst currentDayNum = (new Date()).getDay();\n\tconst dayNames = [\"понедельник\", \"вторник\", \"среда\", \"четверг\", \"пятница\", \"суббота\", \"воскресенье\"];\n\n\tfor(let i in schedule) {\n\t\tfor(let j in schedule[i].list) {\n\t\t\tif(resultList[schedule[i].list[j].id]) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tresultList[schedule[i].list[j].id] = {\n\t\t\t\tday: {\n\t\t\t\t\tnum: schedule[i].day,\n\t\t\t\t\tstring: dayNames[schedule[i].day],\n\t\t\t\t\tisToday: schedule[i].day == currentDayNum\n\t\t\t\t},\n\t\t\t\titem: schedule[i].list[j]\n\t\t\t}\n\t\t}\n\t}\n\n\treturn resultList;\n}","const initers = app => {\n\tapp.router.initPage(\"_page\", (router, pageId) => {\n\t\tdocument.querySelectorAll(\"#single .render-container\").forEach(i => { i.innerHTML = \"\"; });\n\t\tdocument.querySelector(`#${pageId} .preload-spinner`)?.classList.remove(\"dnone\");\n\t\tdocument.querySelector(`[name=\"search\"]`).value = \"\";\n\t\tdocument.querySelectorAll(\".page .more-btn\").forEach(i => i.classList.add(\"dnone\"));\n\t\thideMobNav();\n\n\t\tconst pageTitle = document.querySelector(`#${pageId}`)?.getAttribute(\"data-title\");\n\t\tsetPageTitle(pageTitle);\n\t});\n\n\tapp.router.initPage(\"login\", router => {\n\t\tif(getSessionId()) {\n\t\t\tdocument.location.hash = \"page:\" + router.notFoundPageId;\n\t\t}\n\t});\n\n\tapp.router.initPage(\"home\", router => {\n\t\tapp.loader.homePageUpToLoad(1, resp => {\n\t\t\tconst renderContainer = document.querySelector(\"#home .render-container\");\n\t\t\trenderContainer.innerHTML = \"\";\n\t\t\tdocument.querySelector(\"#home .preload-spinner\").classList.add(\"dnone\");\n\t\t\tresp.list.length && document.querySelector(\"#home .more-btn\").classList.remove(\"dnone\");\n\t\t\tinsertListToRenderContainer(renderContainer, resp.list);\n\t\t});\n\t});\n\n\tapp.router.initPage(\"single\", router => {\t\t\t\n\t\tconst id = document.location.hash.split(\"id\")[1];\n\n\t\tanilibriaRequest(\n\t\t\t\"title\", \n\t\t\t{\n\t\t\t\tid: id,\n\t\t\t\tinclude: \"raw_poster\"\n\t\t\t}, \n\t\t\tresp => {\n\t\t\t\tsetPageTitle(resp.names.ru);\n\t\t\t\tconst genres = resp.genres;\n\t\t\t\tconst renderContainer = document.querySelector(\"#single .render-container.main-render\");\n\n\t\t\t\tapp.loader.scheduleList(scheduleList => {\n\t\t\t\t\tscheduleList = transformScheduleList(scheduleList);\n\t\t\t\t\tresp.inSchedule = scheduleList[resp.id] ? scheduleList[resp.id].day : false;\n\t\t\t\t\trenderContainer.innerHTML = \"\";\n\t\t\t\t\tdocument.querySelector(\"#single .preload-spinner\").classList.add(\"dnone\");\n\t\t\t\t\trenderContainer.appendChild(app.renderer.renderSingle(resp).node);\n\t\t\t\t});\n\n\t\t\t\tlet squery = resp.names.ru;\n\t\t\t\tconst filters = getItemCardFields().join(\",\");\n\n\t\t\t\tapp.cacheProvider.cacheable(\n\t\t\t\t\t`relatedTitles_id${resp.id}`,\n\t\t\t\t\tcacheableCallback => {\n\t\t\t\t\t\tanilibriaRequest(\n\t\t\t\t\t\t\t\"title/search\", \n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsearch: resp.names.ru,\n\t\t\t\t\t\t\t\tafter: 0,\n\t\t\t\t\t\t\t\tlimit: _CONF.numbOfRelevant,\n\t\t\t\t\t\t\t\tfilter: getItemCardFields(),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcacheableCallback\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tresp => {\n\t\t\t\t\t\tresp.list.splice(_CONF.numbOfRelevant, resp.list.length);\n\t\t\t\t\t\tconst ids = resp.list.map(i => i.id);\n\t\t\t\t\t\tconst renderContainer = document.querySelector(\"#single .render-container.relevant-items-render\");\n\t\t\t\t\t\trenderContainer.innerHTML = \"\";\n\t\t\t\t\t\tinsertListToRenderContainer(renderContainer, resp.list.filter(i => i.id != id));\n\n\t\t\t\t\t\tif(_CONF.numbOfRelevant - renderContainer.childNodes.length > 0) {\n\t\t\t\t\t\t\tapp.cacheProvider.cacheable(\n\t\t\t\t\t\t\t\t`additionRelatedTitles_id${id}`,\n\t\t\t\t\t\t\t\tcacheableCallback => {\n\t\t\t\t\t\t\t\t\tanilibriaRequest(\n\t\t\t\t\t\t\t\t\t\t\"title/search\", \n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tsearch: \"\",\n\t\t\t\t\t\t\t\t\t\t\tgenres: genres.splice(0, 4).join(\",\"),\n\t\t\t\t\t\t\t\t\t\t\tafter: 0,\n\t\t\t\t\t\t\t\t\t\t\tlimit: _CONF.numbOfRelevant + 1,\n\t\t\t\t\t\t\t\t\t\t\tfilter: getItemCardFields(),\n\t\t\t\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t\t\t\tcacheableCallback\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tresp2 => {\n\t\t\t\t\t\t\t\t\tresp2.list = resp2.list.filter(i => i.id != id);\n\t\t\t\t\t\t\t\t\tfor(let i = 0; i < resp2.list.length; i++) {\n\t\t\t\t\t\t\t\t\t\tif(renderContainer.childNodes.length >= _CONF.numbOfRelevant) {\n\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif(ids.indexOf(resp2.list[i].id) > -1) {\n\t\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\trenderContainer.appendChild(app.renderer.renderItemCard(resp2.list[i]).node);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t60 * 60 * 3\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t60 * 60 * 3\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t});\n\n\tapp.router.initPage(\"favourites\", router => {\n\t\tapp.loader.favouritesList(resp => {\n\t\t\tconst renderContainer = document.querySelector(\"#favourites .render-container\");\n\t\t\tdocument.querySelector(\"#favourites .preload-spinner\").classList.add(\"dnone\");\n\t\t\trenderContainer.innerHTML = \"\";\n\t\t\tapp.loader.scheduleList(scheduleList => {\n\t\t\t\tscheduleList = transformScheduleList(scheduleList);\n\t\t\t\tfor(let i = resp.length-1; i >= 0; i--) {\n\t\t\t\t\tresp[i].player.episodes = resp[i].player.series;\n\t\t\t\t\tresp[i].inSchedule = scheduleList[resp[i].id] ? scheduleList[resp[i].id].day : false;\n\t\t\t\t\trenderContainer.appendChild(app.renderer.renderItemCard(resp[i]).node);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n\n\tapp.router.initPage(\"search\", router => {\n\t\tlet squery = decodeURI(document.location.hash.split(\"sq:\")[1]);\n\t\tdocument.querySelector(`[name=\"search\"]`).value = squery;\n\n\t\tapp.loader.searchPageUpToLoad(1, resp => {\n\t\t\tconst renderContainer = document.querySelector(\"#search .render-container\");\n\t\t\trenderContainer.innerHTML = \"\";\n\t\t\tdocument.querySelector(\"#search .preload-spinner\").classList.add(\"dnone\");\n\t\t\tresp.list.length && document.querySelector(\"#search .more-btn\").classList.remove(\"dnone\");\n\t\t\tinsertListToRenderContainer(renderContainer, resp.list);\n\t\t});\n\t});\n\n\tapp.router.initPage(\"new-series\", router => {\n\t\tapp.cacheProvider.cacheable(\n\t\t\t\"new-series\",\n\t\t\tcacheableCallback => {\n\t\t\t\tanilibriaRequest(\n\t\t\t\t\t\"title/updates\", \n\t\t\t\t\t{\n\t\t\t\t\t\tafter: 0,\n\t\t\t\t\t\tlimit: 60,\n\t\t\t\t\t\tfilter: getItemCardFields(),\n\t\t\t\t\t},\n\t\t\t\t\tcacheableCallback\n\t\t\t\t);\n\t\t\t},\n\t\t\tresp => {\n\t\t\t\tconst renderContainer = document.querySelector(\"#new-series .render-container\");\n\t\t\t\trenderContainer.innerHTML = \"\";\n\t\t\t\tdocument.querySelector(\"#new-series .preload-spinner\").classList.add(\"dnone\");\n\n\t\t\t\tapp.loader.favouritesList(favs => {\n\t\t\t\t\tconst playerData = getStorablePlayerData();\n\n\t\t\t\t\tfor(let i = 0; i < resp.list.length; i++) {\n\t\t\t\t\t\tfor(let j = 0; j < favs.length; j++) {\n\t\t\t\t\t\t\tif(favs[j].id == resp.list[i].id) {\n\t\t\t\t\t\t\t\tif(playerData[resp.list[i].id]) {\n\t\t\t\t\t\t\t\t\tresp.list[i].localPlayerData = playerData[resp.list[i].id];\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\trenderContainer.appendChild(app.renderer.renderItemCard(resp.list[i]).node);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t60 * 60 * 5\n\t\t);\n\t\t\n\t});\n\n\tapp.router.initPage(\"genres\", router => {\n\t\tlet selectedGenres = document.location.hash.split(\"sg:\")[1];\n\t\tsetTimeout(() => {\n\t\t\tmakeSelectedGenresActivated();\n\t\t}, 30);\n\n\t\tconst renderContainer = document.querySelector(\"#genres .render-container\");\n\t\tif(selectedGenres) {\n\t\t\tapp.loader.genresPageUpToLoad(1, resp => {\n\t\t\t\tconst renderContainer = document.querySelector(\"#genres .render-container\");\n\t\t\t\trenderContainer.innerHTML = \"\";\n\t\t\t\tdocument.querySelector(\"#genres .preload-spinner\").classList.add(\"dnone\");\n\t\t\t\tresp.list.length && document.querySelector(\"#genres .more-btn\").classList.remove(\"dnone\");\n\t\t\t\tinsertListToRenderContainer(renderContainer, resp.list);\n\t\t\t});\n\t\t} else {\n\t\t\trenderContainer.innerHTML = \"\";\n\t\t\tdocument.querySelector(\"#genres .preload-spinner\").classList.add(\"dnone\");\n\t\t}\n\t});\n}"]}