{"version":3,"sources":["Alert.js","App.js","Auth.js","Loader.js","PostRender.js","Renderer.js","Router.js","conf.js","functions.js","routes-events.js"],"names":["Alert","constructor","type","content","isSingleton","isClosable","this","id","Date","getTime","Math","random","alertsList","referenceComponent","document","querySelector","console","error","template","cloneNode","getInstance","initComponent","classList","add","setAttribute","innerHTML","addEventListener","e","preventDefault","close","showIn","container","append","setTimeout","remove","changeContent","newContent","closeAlertComponent","alertId","createAlertComponent","createGlobalAlertComponent","alert","querySelectorAll","forEach","item","currentTarget","getAttribute","App","router","Router","auth","Auth","renderer","Renderer","postRender","PostRender","loader","Loader","initRoutesEvents","urlMonitor","initDisplayingAuthBtns","initPreloadSpinner","initBaseEvents","initGenres","renderPreloadSpinner","logout","contains","hideMobNav","showMobNav","squery","keyCode","value","trim","location","hash","blur","lmap","home","homePageUpToLoad","search","searchPageUpToLoad","genres","genresPageUpToLoad","let","p","page","renderContainer","from","childNodes","length","resp","insertListToRenderContainer","genresList","items","appendChild","renderGenresList","node","getSessionId","app","window","formSelector","form","submitBtn","initForm","email","passwd","xhr","XMLHttpRequest","open","onload","status","JSON","parse","response","err","localStorage","setItem","sessionId","mes","fdata","FormData","send","removeItem","callback","anilibriaRequest","after","limit","_CONF","perPage","filter","getItemCardFields","decodeURI","split","selectedGenres","getSelectedGenres","join","favouritesList","sessId","session","sorting_type","itemCard","html","nodeFromHTML","parentNode","single","post","i","playerData","default_quality","preroll_deny","file","player","playlist","files","host","hls","sd","hd","fhd","push","skip","skips","opening","title","poster","download","Playerjs","renderFavoriteBtn","favoriteBtn","postId","addToFavourites","removeFromFavourites","genreBtn","genre","inx","map","indexOf","splice","renderThumbnail","string","posters","medium","url","series","last","renderItemCard","thumb","names","ru","season","year","full_string","renderTorrents","torrents","list","torrent","size","total_size","toString","substr","torrent_id","quality","seeders","leechers","renderSingle","en","description","renderGenreBtn","createElement","btn","pagesContainerSelector","defaultPageId","notFoundPageId","containerSelector","events","findedPages","pages","currentPage","currentPath","zindex","goToPage","pageId","style","zIndex","scrollTo","top","setInterval","route","addEvent","name","api","domen","ver","numbOfRelevant","getItem","stdXHR","method","onloadCallback","onerror","makeSelectedGenresActivated","setPageTitle","pageTitle","title_id","params","methodMap","delFavorite","addFavorite","_default","query","URLSearchParams","ids","resp2","favs","j"],"mappings":"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","file":"all.min.js","sourcesContent":["class Alert {\n\tconstructor(type, content, isSingleton, isClosable) {\n\t\tthis.id = \"alert-id-\" + (new Date()).getTime() + Math.random();\n\t\talertsList[this.id] = this;\n\t\tthis.type = type;\n\t\tthis.content = content || \"\";\n\t\tthis.isSingleton = isSingleton || false;\n\t\tthis.isClosable = isClosable || false;\n\n\t\tconst referenceComponent = document.querySelector(`.component.alert[data-id=\"alert-id-reference\"]`);\n\t\tif(!referenceComponent){\n\t\t\treturn console.error(\"Reference of alert component not found\");\n\t\t}\n\n\t\tthis.template = referenceComponent.cloneNode(true);\n\t\tthis.template.getInstance = () => this;\n\t\tthis.initComponent();\n\t}\n\n\tinitComponent() {\n\t\tthis.template.classList.add(`alert-${this.type}`);\n\t\tthis.template.setAttribute(\"data-id\", this.id);\n\t\tthis.template.querySelector(\".content\").innerHTML = this.content;\n\n\t\tthis.template.querySelector(\".close-alert\").addEventListener(\"click\", e => {\n\t\t\te.preventDefault();\n\t\t\tthis.close();\n\t\t});\n\t}\n\n\tshowIn(container) {\n\t\tif(!this.template){\n\t\t\treturn false;\n\t\t}\n\n\t\tif(this.isSingleton){\n\t\t\tcontainer.innerHTML = \"\";\n\t\t}\n\t\tcontainer.append(this.template);\n\t\tsetTimeout(() => {\n\t\t\tthis.template.classList.add(\"show\");\n\t\t}, 10);\n\n\t\treturn this;\n\t}\n\n\tclose() {\n\t\tthis.template.classList.remove(\"show\");\n\t\tsetTimeout(() => {\n\t\t\tthis.template.remove();\n\t\t\tdelete alertsList[this.id];\n\t\t}, 150);\n\t}\n\n\tchangeContent(newContent) {\n\t\tthis.template.querySelector(\".content\").innerHTML = newContent;\n\t}\n}\n\nconst closeAlertComponent = alertId => {\n\treturn alertsList[alertId]?.close();\n}\n\nconst createAlertComponent = (type, content, isSingleton, isClosable) => {\n\treturn new Alert(type, content, isSingleton, isClosable);\n}\n\nconst createGlobalAlertComponent = (type, content, isSingleton, isClosable) => {\n\tconst alert = createAlertComponent(type, content, isSingleton, isClosable);\n\talert.showIn(document.querySelector(\".global-alerts-container\"));\n\treturn alert;\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", e => {\n\tdocument.querySelectorAll(`.component.alert .close-alert`).forEach(item => {\n\t\titem.addEventListener(\"click\", e => {\n\t\t\te.preventDefault();\n\t\t\tconst alertId = e.currentTarget.getAttribute(\"data-close-alert-id\");\n\t\t\tcloseAlertComponent(alertId);\n\t\t});\n\t});\n});\n\nconst alertsList = {};","class App {\n\tconstructor() {\n\t\tthis.router = new Router(\".page-container\", \"home\", \"not-found\");\n\t\tthis.auth = new Auth(\"#login .login-form form\");\n\t\tthis.renderer = new Renderer();\n\t\tthis.postRender = new PostRender();\n\t\tthis.loader = new Loader();\n\n\t\tinitRoutesEvents(this);\n\t\tthis.router.urlMonitor();\n\n\t\tthis.initDisplayingAuthBtns();\n\t\tthis.initPreloadSpinner();\n\t\tthis.initBaseEvents();\n\t\tthis.initGenres();\n\t}\n\n\tinitPreloadSpinner() {\n\t\tdocument.querySelectorAll(\".preload-spinner\").forEach(item => {\n\t\t\titem.innerHTML = this.renderer.renderPreloadSpinner();\n\t\t});\n\t}\n\n\tinitBaseEvents() {\n\t\tdocument.querySelector(\".logout-btn\").addEventListener(\"click\", e => {\n\t\t\tthis.auth.logout();\n\t\t});\n\n\t\tdocument.querySelector(\".btn-nav-on-mob-show\").addEventListener(\"click\", e => {\n\t\t\tif(e.currentTarget.classList.contains(\"active\")) {\n\t\t\t\thideMobNav();\n\t\t\t}else{\n\t\t\t\tshowMobNav();\n\t\t\t}\n\t\t});\n\n\t\tdocument.querySelector(`[name=\"search\"]`).addEventListener(\"keyup\", e => {\n\t\t\te.preventDefault();\n\t\t\tif(e.keyCode == 13) {\n\t\t\t\tlet squery = e.currentTarget.value.trim();\n\t\t\t\tdocument.location.hash = `page:search;sq:${squery}`;\n\t\t\t\te.currentTarget.blur();\n\t\t\t}\n\t\t});\n\n\t\tconst lmap = { \n\t\t\thome: this.loader.homePageUpToLoad, \n\t\t\tsearch: this.loader.searchPageUpToLoad, \n\t\t\tgenres: this.loader.genresPageUpToLoad \n\t\t};\n\t\tfor(let p in lmap) {\n\t\t\tconst page = document.querySelector(`#${p}`);\n\t\t\tpage.querySelector(`.more-btn`).addEventListener(\"click\", e => {\n\t\t\t\tconst renderContainer = page.querySelector(\".render-container\");\n\t\t\t\tconst from = renderContainer.childNodes.length;\n\t\t\t\tpage.querySelector(`.more-btn-wrap .preload-spinner`).classList.remove(\"dnone\");\n\t\t\t\tpage.querySelector(`.more-btn`).classList.add(\"dnone\");\n\n\t\t\t\tlmap[p](from, resp => {\n\t\t\t\t\tpage.querySelector(`.more-btn-wrap .preload-spinner`).classList.add(\"dnone\");\n\t\t\t\t\tif(resp.length) {\n\t\t\t\t\t\tpage.querySelector(`.more-btn`).classList.remove(\"dnone\");\n\t\t\t\t\t}\n\t\t\t\t\tinsertListToRenderContainer(renderContainer, resp);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tinitGenres() {\n\t\tthis.loader.genresList(items => {\n\t\t\tdocument.querySelector(\"#genres .render-genres\").appendChild(this.renderer.renderGenresList(items).node);\n\t\t});\n\t}\n\n\tinitDisplayingAuthBtns() {\n\t\tif(getSessionId()) {\n\t\t\tdocument.querySelector(\".logout-btn\").classList.remove(\"dnone\");\n\t\t\tdocument.querySelector(\".go-login-page-btn\").classList.add(\"dnone\");\n\t\t} else {\n\t\t\tdocument.querySelector(\".logout-btn\").classList.add(\"dnone\");\n\t\t\tdocument.querySelector(\".go-login-page-btn\").classList.remove(\"dnone\");\n\t\t}\n\t}\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", e => {\n\tconst app = new App();\n\twindow.app = () => app;\n});","class Auth {\n\tconstructor(formSelector) {\n\t\tthis.formSelector = formSelector;\n\t\tthis.form = document.querySelector(this.formSelector);\n\t\tthis.submitBtn = this.form.querySelector(\".submit-btn\");\n\t\tthis.initForm();\n\t}\n\n\tinitForm() {\n\t\tthis.form.addEventListener(\"submit\", e => {\n\t\t\te.preventDefault();\n\t\t\tif(this.submitBtn.classList.contains(\"disable\")) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.submitBtn.classList.add(\"disable\");\n\n\t\t\tconst email = this.form.querySelector(\"#email\").value;\n\t\t\tconst passwd = this.form.querySelector(\"#passwd\").value;\n\n\t\t\tconst xhr = new XMLHttpRequest();\n\t\t\txhr.open(\"POST\", \"https://www.anilibria.tv/public/login.php\");\n\t\t\txhr.onload = () => {\n\t\t\t\tthis.submitBtn.classList.remove(\"disable\");\n\n\t\t\t\tif(xhr.status == 200) {\n\t\t\t\t\tconst resp = JSON.parse(xhr.response);\n\t\t\t\t\tif(resp.err == \"ok\") {\n\t\t\t\t\t\tlocalStorage.setItem(\"sessionId\", resp.sessionId);\n\t\t\t\t\t\tconst alert = createGlobalAlertComponent(\"success\", \"Успешно!\");\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\talert.close();\n\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\tdocument.location.hash = \"#\";\n\t\t\t\t\t\tdocument.querySelector(\".logout-btn\").classList.remove(\"dnone\");\n\t\t\t\t\t\tdocument.querySelector(\".go-login-page-btn\").classList.add(\"dnone\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst alert = createGlobalAlertComponent(\"danger\", resp.mes);\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\talert.close();\n\t\t\t\t\t\t}, 4500);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst alert = createGlobalAlertComponent(\"danger\", \"Сервер не доступен\");\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\talert.close();\n\t\t\t\t\t}, 4500);\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\n\t\t\tconst fdata = new FormData();\n\t\t\tfdata.append(\"mail\", email);\n\t\t\tfdata.append(\"passwd\", passwd);\n\t\t\tfdata.append(\"fa2code\", \"\");\n\t\t\tfdata.append(\"csrf\", \"1\");\n\t\t\txhr.send(fdata);\n\t\t});\n\t}\n\n\tlogout() {\n\t\tlocalStorage.removeItem(\"sessionId\");\n\t\tdocument.location.hash = \"#page:login\";\n\t\tdocument.querySelector(\".logout-btn\").classList.add(\"dnone\");\n\t\tdocument.querySelector(\".go-login-page-btn\").classList.remove(\"dnone\");\n\t}\n}","class Loader {\n\tconstructor(){}\n\n\thomePageUpToLoad(from, callback) {\n\t\tanilibriaRequest(\n\t\t\t\"getUpdates\", \n\t\t\t{\n\t\t\t\tafter: from,\n\t\t\t\tlimit: _CONF.perPage.home,\n\t\t\t\tfilter: getItemCardFields()\n\t\t\t}, \n\t\t\tresp => callback(resp)\n\t\t);\n\t}\n\n\tsearchPageUpToLoad(from, callback) {\n\t\tlet squery = decodeURI(document.location.hash.split(\"sq:\")[1]);\n\n\t\tanilibriaRequest(\n\t\t\t\"searchTitles\", \n\t\t\t{\n\t\t\t\tafter: from,\n\t\t\t\tlimit: _CONF.perPage.search,\n\t\t\t\tfilter: getItemCardFields(),\n\t\t\t\tsearch: squery\n\t\t\t}, \n\t\t\tresp => callback(resp)\n\t\t);\n\t}\n\n\tgenresPageUpToLoad(from, callback) {\n\t\tconst selectedGenres = getSelectedGenres();\n\n\t\tanilibriaRequest(\n\t\t\t\"searchTitles\", \n\t\t\t{\n\t\t\t\tsearch: \"\",\n\t\t\t\tfilter: getItemCardFields(),\n\t\t\t\tgenres: selectedGenres.join(\",\"),\n\t\t\t\tafter: from,\n\t\t\t\tlimit: _CONF.perPage.search,\n\t\t\t}, \n\t\t\tresp => callback(resp)\n\t\t);\n\t}\n\n\tfavouritesList(callback) {\n\t\tconst sessId = getSessionId();\n\t\tif(!sessId) {\n\t\t\treturn setTimeout(() => document.location.hash = \"#page:login\", 20);\n\t\t}\n\n\t\tanilibriaRequest(\n\t\t\t\"getFavorites\", \n\t\t\t{\n\t\t\t\tsession: sessId,\n\t\t\t\tlimit: 100,\n\t\t\t\tfilter: getItemCardFields(),\n\t\t\t}, \n\t\t\tresp => callback(resp)\n\t\t);\n\t}\n\n\tgenresList(callback) {\n\t\tanilibriaRequest(\n\t\t\t\"getGenres\", \n\t\t\t{\n\t\t\t\tsorting_type: 1\n\t\t\t}, \n\t\t\tresp => callback(resp)\n\t\t);\n\t}\n}","class PostRender {\n\tconstructor() {}\n\n\titemCard(html) {\n\t\tconst item = nodeFromHTML(html);\n\n\t\titem.querySelector(\".thumbnail-img\").addEventListener(\"load\", e => {\n\t\t\te.currentTarget.parentNode.parentNode.classList.add(\"load-ready\");\n\t\t});\n\n\t\treturn item;\n\t}\n\n\tsingle(html, post) {\n\t\tconst item = nodeFromHTML(html);\n\n\t\tconst playerData = {\n\t\t\tid: \"main-player-\" + post.id,\n\t\t\tdefault_quality: \"720p\",\n\t\t\tpreroll_deny: \"\",\n\t\t\tfile: []\n\t\t};\n\n\n\t\tfor(let i in post.player.playlist) {\n\t\t\tlet files = `[480p]https://${post.player.host}${post.player.playlist[i].hls.sd}`;\n\n\t\t\tif(post.player.playlist[i].hls.hd) {\n\t\t\t\tfiles += `,[720p]https://${post.player.host}${post.player.playlist[i].hls.hd}`;\n\t\t\t}\n\n\t\t\tif(post.player.playlist[i].hls.fhd) {\n\t\t\t\tfiles += `,[1080p]https://${post.player.host}${post.player.playlist[i].hls.fhd}`;\n\t\t\t}\n\n\t\t\tplayerData.file.push({\n\t\t\t\tid: \"s\"+i,\n\t\t\t\tskip: post.player.playlist[i].skips.opening.length ? post.player.playlist[i].skips.opening.join(\"-\") : null,\n\t\t\t\ttitle: `Серия ${i}`,\n\t\t\t\tposter: null,\n\t\t\t\tdownload: null,\n\t\t\t\tfile: files\n\t\t\t});\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tlet player = new Playerjs(playerData);\n\t\t}, 30);\n\n\t\titem.querySelector(\".fav-btn-wrap\").appendChild(app().renderer.renderFavoriteBtn(post).node);\n\n\t\titem.querySelector(\".thumbnail-img\").addEventListener(\"load\", e => {\n\t\t\te.currentTarget.parentNode.classList.add(\"load-ready\");\n\t\t});\n\n\t\treturn item;\n\t}\n\n\tfavoriteBtn(html, postId) {\n\t\tconst item = nodeFromHTML(html);\n\n\t\tconst sessId = getSessionId();\n\t\tif(sessId) {\n\t\t\titem.querySelector(\".state.unset-from\").classList.add(\"dnone\");\n\t\t\titem.querySelector(\".state.set-to\").classList.remove(\"dnone\");\n\n\t\t\tapp().loader.favouritesList(resp => {\n\t\t\t\tfor(let i=0; i<resp.length; i++) {\n\t\t\t\t\tif(postId == resp[i].id) {\n\t\t\t\t\t\titem.querySelector(\".state.unset-from\").classList.remove(\"dnone\");\n\t\t\t\t\t\titem.querySelector(\".state.set-to\").classList.add(\"dnone\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\titem.classList.remove(\"dnone\");\n\t\t\t});\n\t\t\t\n\t\t\titem.addEventListener(\"click\", e => {\n\t\t\t\tif(e.currentTarget.querySelector(\".unset-from\").classList.contains(\"dnone\")) {\n\t\t\t\t\taddToFavourites(postId, resp => {\n\t\t\t\t\t\titem.querySelector(\".state.unset-from\").classList.remove(\"dnone\");\n\t\t\t\t\t\titem.querySelector(\".state.set-to\").classList.add(\"dnone\");\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tremoveFromFavourites(postId, resp => {\n\t\t\t\t\t\titem.querySelector(\".state.unset-from\").classList.add(\"dnone\");\n\t\t\t\t\t\titem.querySelector(\".state.set-to\").classList.remove(\"dnone\");\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn item;\n\t}\n\n\tgenreBtn(html) {\n\t\tconst item = nodeFromHTML(html);\n\n\t\titem.addEventListener(\"click\", e => {\n\t\t\te.preventDefault();\n\t\t\tconst genre = e.currentTarget.getAttribute(\"data-genre-name\");\n\t\t\tlet selectedGenres = document.location.hash.split(\"sg:\")[1];\n\t\t\tselectedGenres = selectedGenres \n\t\t\t\t? selectedGenres.split(\",\").map(item => { return decodeURI(item); }) \n\t\t\t\t: [];\n\n\t\t\tconst inx = selectedGenres.indexOf(genre);\n\t\t\tif(inx === -1) {\n\t\t\t\tselectedGenres.push(genre);\n\t\t\t\te.currentTarget.classList.add(\"active\");\n\t\t\t} else {\n\t\t\t\tselectedGenres.splice(inx, 1);\n\t\t\t\te.currentTarget.classList.remove(\"active\");\n\t\t\t}\n\n\t\t\tdocument.location.hash = \"page:genres;sg:\" + selectedGenres.join(\",\");\n\t\t});\n\n\t\treturn item;\n\t}\n}","class Renderer {\n\tconstructor() {}\n\n\trenderThumbnail(post) {\n\t\tconst status = post.status.string ? post.status.string : \"Завершен\";\n\t\treturn `\n\t\t\t<div class=\"component thumbnail\">\n\t\t\t\t<img src=\"//anilibria.tv${post.posters.medium.url}\" class=\"thumbnail-img\">\n\t\t\t\t<img \n\t\t\t\t\tsrc=\"data:image/jpeg;base64,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\" \n\t\t\t\t\tclass=\"poster-placeholder\"\n\t\t\t\t>\n\t\t\t\t<div class=\"hover-effect\">\n\t\t\t\t\t<span class=\"mdi mdi-arrow-right\"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"status\">${status}</div>\n\t\t\t\t<div class=\"series\">Серий ${post.player.series.last}</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderItemCard(post) {\n\t\tlet genres = post.genres.join(\", \");\n\t\tconst thumb = this.renderThumbnail(post);\n\n\t\tlet html = `<a href=\"#page:single;id${post.id}\" class=\"no-decoration item-link\">\n\t\t\t<div class=\"component card item-card\" data-id=\"${post.id}\">\n\t\t\t\t${thumb}\n\t\t\t\t<div class=\"info\">\n\t\t\t\t\t<div class=\"title\">${post.names.ru} (<span class=\"year\">${post.season.year}</span>)</div>\n\t\t\t\t\t<div class=\"meta\">\n\t\t\t\t\t\t<div class=\"genres\">${genres}</div>\n\t\t\t\t\t\t<div class=\"type\">${post.type.full_string}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</a>`;\n\n\t\treturn {\n\t\t\tstring: html,\n\t\t\tnode: app().postRender.itemCard(html)\n\t\t};\n\t}\n\n\trenderTorrents(post) {\n\t\tlet html = `<div class=\"component torrents\">`;\n\n\t\tfor(let i=0; i<post.torrents.list.length; i++) {\n\t\t\tconst torrent = post.torrents.list[i];\n\t\t\tlet size = torrent.total_size / 1024 / 1024;\n\t\t\tsize = (size > 1024) \n\t\t\t\t? (size / 1024).toString().split(\".\")[0] + \".\" + (size / 1024).toString().split(\".\")[1].substr(0,2) + \" ГБ\" \n\t\t\t\t: size.toString().split(\".\")[0] + \".\" +  size.toString().split(\".\")[1].substr(0,2) + \" МБ\";\n\t\t\thtml += `\n\t\t\t\t<div class=\"torrent\" data-torrent-id=\"${torrent.torrent_id}\">\n\t\t\t\t\t<div class=\"series\">Серии ${torrent.series.string}</div>\n\t\t\t\t\t<div class=\"quality\">${torrent.quality.string}</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"seed-leech\">\n\t\t\t\t\t\t<span class=\"seed\">\n\t\t\t\t\t\t\t<span class=\"mdi mdi-arrow-up\"></span>\n\t\t\t\t\t\t\t${torrent.seeders}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"leech\">\n\t\t\t\t\t\t\t<span class=\"mdi mdi-arrow-down\"></span>\n\t\t\t\t\t\t\t${torrent.leechers}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"download\">\n\t\t\t\t\t\t<a href=\"//anilibria.tv${torrent.url}\" class=\"std-btn btn-success\" target=\"_blank\">\n\t\t\t\t\t\t\t<span class=\"mdi mdi-download\"></span>\n\t\t\t\t\t\t\t<span class=\"btn-label\">Скачать</span>\n\t\t\t\t\t\t\t<span class=\"btn-tsize\">${size}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\thtml += \"</div>\";\n\t\treturn html;\n\t}\n\n\trenderFavoriteBtn(post) {\n\t\tconst html = `<button class=\"std-btn btn-warning fav-btn dnone\" data-id=\"${post.id}\">\n\t\t\t<span class=\"state unset-from\">\n\t\t\t\t<span class=\"mdi mdi-star\"></span>\n\t\t\t\tВ избранном\n\t\t\t</span>\n\t\t\t<span class=\"state set-to\">\n\t\t\t\t<span class=\"mdi mdi-star-outline\"></span>\n\t\t\t\tДобавить в избранное\n\t\t\t</span>\n\t\t</button>`;\n\n\t\treturn {\n\t\t\thtml: html,\n\t\t\tnode: app().postRender.favoriteBtn(html, post.id)\n\t\t};\n\t}\n\n\trenderSingle(post) {\n\t\tlet genres = this.renderGenresList(post.genres).html;\n\t\tconst thumb = this.renderThumbnail(post);\n\t\tconst torrents = this.renderTorrents(post);\n\n\t\tlet html = `<div class=\"component single-item\">\n\t\t\t<div class=\"std-row\">\n\t\t\t\t${thumb}\n\t\t\t\t<div class=\"item-info\">\n\t\t\t\t\t<h2 class=\"title\"><strong>${post.names.ru}</strong> / ${post.names.en}</h2>\n\t\t\t\t\t<div class=\"time-period\">${post.season.string || \"\"} ${post.season.year}</div>\n\t\t\t\t\t<div class=\"genres\">${genres}</div>\n\t\t\t\t\t<div class=\"type\">${post.type.full_string}</div>\n\t\t\t\t\t<div class=\"description\">${post.description}</div>\n\t\t\t\t\t<div class=\"control-panel\">\n\t\t\t\t\t\t<div class=\"fav-btn-wrap\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${torrents}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"player\" id=\"main-player-${post.id}\"></div>\n\t\t</div>`;\n\n\t\treturn {\n\t\t\tstring: html,\n\t\t\tnode: app().postRender.single(html, post)\n\t\t};\n\t}\n\n\trenderPreloadSpinner() {\n\t\treturn `<div class=\"loadingio-spinner-dual-ball-9pyhqeozhs\"><div class=\"ldio-jyt13pqa73\">\n\t\t\t<div></div><div></div><div></div>\n\t\t\t</div></div>`;\n\t}\n\n\trenderGenreBtn(genre) {\n\t\tlet html = `<a \n\t\t\thref=\"#page:genres;sg:${genre}\" \n\t\t\tclass=\"std-btn genre-btn\" \n\t\t\tdata-genre-name=\"${genre}\"\n\t\t>\n\t\t\t${genre}\n\t\t</a>`;\n\n\t\treturn {\n\t\t\thtml: html,\n\t\t\tnode: app().postRender.genreBtn(html)\n\t\t};\n\t}\n\n\trenderGenresList(genres) {\n\t\tlet container = document.createElement(\"DIV\");\n\t\tcontainer.classList.add(\"genres-wrap\");\n\t\tlet html = `<div class=\"genres-wrap\">`;\n\t\tfor(let i=0; i<genres.length; i++) {\n\t\t\tconst btn = this.renderGenreBtn(genres[i]);\n\t\t\tcontainer.appendChild(btn.node);\n\t\t\thtml += btn.html;\n\t\t}\n\n\t\thtml += \"</div>\";\n\n\t\treturn {\n\t\t\thtml: html,\n\t\t\tnode: container\n\t\t};\n\t}\n}","class Router {\n\tconstructor(pagesContainerSelector, defaultPageId, notFoundPageId) {\n\t\tthis.containerSelector = pagesContainerSelector;\n\t\tthis.container = document.querySelector(this.containerSelector);\n\t\tthis.defaultPageId = defaultPageId;\n\t\tthis.notFoundPageId = notFoundPageId;\n\t\tthis.events = {};\n\t\tconst findedPages = this.container.querySelectorAll(\".page[id]\");\n\n\t\tthis.pages = {};\n\t\tfor(let i=0; i<findedPages.length; i++) {\n\t\t\tthis.pages[findedPages[i].getAttribute(\"id\")] = findedPages[i];\n\t\t}\n\n\t\tthis.currentPage = \"default-val\";\n\t\tthis.currentPath = \"default-val\";\n\t\tthis.zindex = 1;\n\t}\n\n\tgoToPage(pageId) {\n\t\tif(typeof pageId == \"undefined\") {\n\t\t\treturn document.location.hash = `page:${this.defaultPageId}`;\n\t\t}\n\n\t\tif(typeof this.pages[pageId] == \"undefined\") {\n\t\t\treturn this.goToPage(this.notFoundPageId);\n\t\t}\n\n\t\tthis.container.querySelectorAll(\".page.show\").forEach( p => {\n\t\t\treturn p.classList.remove(\"show\");\n\t\t} );\n\n\t\tif(typeof this.pages[pageId] != \"undefined\") {\n\t\t\tthis.events[\"jumpTo\"] && this.events[\"jumpTo\"](this, pageId);\n\t\t\tthis.events[pageId] && this.events[pageId](this);\n\t\t\tthis.pages[pageId].style.zIndex = this.zindex;\n\t\t\tthis.zindex++;\n\t\t}\n\n\t\tthis.pages[pageId]?.classList.add(\"show\");\n\t\twindow.scrollTo({ top: 0 });\n\t\tthis.currentPage = pageId;\n\t\tthis.currentPath = document.location.hash;\n\t}\n\n\turlMonitor() {\n\t\tsetInterval(() => {\n\t\t\tconst route = document.location.hash.split(\"page:\")[1];\n\t\t\tif(document.location.hash != this.currentPath) {\n\t\t\t\tthis.goToPage(route?.split(\";\")[0]);\n\t\t\t}\n\t\t}, 10);\n\t}\n\n\taddEvent(name, callback) {\n\t\tthis.events[name] = callback;\n\t}\n}","const _CONF = {\n\tapi: {\n\t\tdomen: \"api.anilibria.tv\",\n\t\tver: \"v2.13\"\n\t},\n\n\tperPage: {\n\t\thome: 20,\n\t\tsearch: 20,\n\t\tgenres: 20\n\t},\n\t\n\tnumbOfRelevant: 12\n};","const getSessionId = () => {\n\tconst sessId = localStorage.getItem(\"sessionId\");\n\tif(sessId) {\n\t\treturn sessId;\n\t}\n\n\treturn false;\n};\n\nconst stdXHR = (method, url, onloadCallback) => {\n\tconst xhr = new XMLHttpRequest();\n\txhr.open(method, url);\n\t\n\txhr.onload = () => {\n\t\tif(xhr.status == 200) {\n\t\t\tonloadCallback(xhr);\n\t\t} else {\n\t\t\tif(xhr.status == 404) {\n\t\t\t\tapp().router.goToPage(\"not-found\");\n\t\t\t}\n\t\t\tconst alert = createGlobalAlertComponent(\"danger\", \"Ошибка загрузки данных\");\n\t\t\tsetTimeout(() => alert.close(), 3000);\n\t\t}\n\t}\n\n\txhr.onerror = () => {\n\t\tconst alert = createGlobalAlertComponent(\"danger\", \"Сервер не доступен\");\n\t\tsetTimeout(() => alert.close(), 3000);\n\t}\n\n\treturn xhr;\n}\n\nconst showMobNav = () => {\n\tdocument.querySelector(\".btn-nav-on-mob-show\").classList.add(\"active\");\n\tdocument.querySelectorAll(\".navigation-main-wrapper, .userbar-wrapper\").forEach(item => {\n\t\titem.classList.add(\"show\");\n\t});\n}\n\nconst hideMobNav = () => {\n\tdocument.querySelector(\".btn-nav-on-mob-show\").classList.remove(\"active\");\n\tdocument.querySelectorAll(\".navigation-main-wrapper, .userbar-wrapper\").forEach(item => {\n\t\titem.classList.remove(\"show\");\n\t});\n}\n\nconst makeSelectedGenresActivated = () => {\n\tlet selectedGenres = document.location.hash.split(\"sg:\")[1];\n\tselectedGenres = selectedGenres \n\t\t? selectedGenres.split(\",\").map(item => { return decodeURI(item); }) \n\t\t: [];\n\tdocument.querySelectorAll(\"#genres .render-genres .genre-btn.active\").forEach(\n\t\ti => i.classList.remove(\"active\")\n\t);\n\tfor(let i=0; i<selectedGenres.length; i++) {\n\t\tdocument.querySelector(`#genres .render-genres .genre-btn[data-genre-name=\"${selectedGenres[i]}\"]`)?.classList.add(\"active\");\n\t}\n}\n\nconst getItemCardFields = () => {\n\treturn [ \"id\", \"code\", \"names\", \"genres\", \"posters\", \"status\", \"player\", \"season\", \"type\" ];\n}\n\nconst setPageTitle = pageTitle => {\n\tdocument.querySelector(\"head title\").innerHTML = pageTitle;\n}\n\nconst nodeFromHTML = html => {\n\tconst container = document.createElement(\"DIV\");\n\tcontainer.innerHTML = html;\n\treturn item = container.childNodes[0];\n}\n\nconst addToFavourites = (postId, callback) => {\n\tconst sessId = getSessionId();\n\tif(sessId) {\n\t\tanilibriaRequest(\n\t\t\t\"addFavorite\",\n\t\t\t{\n\t\t\t\tsession: sessId,\n\t\t\t\ttitle_id: postId\n\t\t\t},\n\t\t\tresp => callback(resp)\n\t\t);\n\t}\n}\n\nconst removeFromFavourites = (postId, callback) => {\n\tconst sessId = getSessionId();\n\tif(sessId) {\n\t\tanilibriaRequest(\n\t\t\t\"delFavorite\",\n\t\t\t{\n\t\t\t\tsession: sessId,\n\t\t\t\ttitle_id: postId\n\t\t\t},\n\t\t\tresp => callback(resp)\n\t\t);\n\t}\n}\n\nconst insertListToRenderContainer = (renderContainer, list) => {\n\tfor(let i = 0; i < list.length; i++) {\n\t\trenderContainer.appendChild(app().renderer.renderItemCard(list[i]).node);\n\t}\n}\n\nconst anilibriaRequest = (name, params, callback) => {\n\tconst methodMap = {\n\t\tdelFavorite: \"DELETE\",\n\t\taddFavorite: \"PUT\",\n\t\t_default: \"GET\"\n\t};\n\tparams = params || {};\n\n\tconst method = methodMap[name] || methodMap._default;\n\tlet url = `//${_CONF.api.domen}/api/${_CONF.api.ver}/${name}`;\n\t\n\tif(params[\"filter\"]) {\t\n\t \tparams.filter = params.filter.join(\",\");\n\t}\n\n\tconst query = (new URLSearchParams(params)).toString();\n\tif(query) {\n\t\turl += `?${query}`;\n\t}\n\n\tstdXHR(method, url,\n\t\txhr => {\n\t\t\tconst resp = JSON.parse(xhr.response);\n\t\t\tcallback(resp);\n\t\t}\n\t).send();\n}\n\nconst getSelectedGenres = () => {\n\tlet genres = document.location.hash.split(\"sg:\")[1];\n\tgenres = decodeURI(genres);\n\treturn genres.length ? genres.split(\",\") : [];\n}","const initRoutesEvents = (app) => {\n\tapp.router.addEvent(\"jumpTo\", (router, pageId) => {\n\t\tdocument.querySelectorAll(\"#single .render-container\").forEach(i => { i.innerHTML = \"\"; });\n\t\tdocument.querySelector(`#${pageId} .preload-spinner`)?.classList.remove(\"dnone\");\n\t\tdocument.querySelector(`[name=\"search\"]`).value = \"\";\n\t\tdocument.querySelectorAll(\".page .more-btn\").forEach(i => i.classList.add(\"dnone\"));\n\t\thideMobNav();\n\n\t\tconst pageTitle = document.querySelector(`#${pageId}`)?.getAttribute(\"data-title\");\n\t\tsetPageTitle(pageTitle);\n\t});\n\n\tapp.router.addEvent(\"login\", (router) => {\n\t\tif(getSessionId()) {\n\t\t\tdocument.location.hash = \"page:\" + router.notFoundPageId;\n\t\t}\n\t});\n\n\tapp.router.addEvent(\"home\", (router) => {\n\t\tapp.loader.homePageUpToLoad(0, (resp) => {\n\t\t\tconst renderContainer = document.querySelector(\"#home .render-container\");\n\t\t\trenderContainer.innerHTML = \"\";\n\t\t\tdocument.querySelector(\"#home .preload-spinner\").classList.add(\"dnone\");\n\t\t\tresp.length && document.querySelector(\"#home .more-btn\").classList.remove(\"dnone\");\n\t\t\tinsertListToRenderContainer(renderContainer, resp);\n\t\t});\n\t});\n\n\tapp.router.addEvent(\"single\", (router) => {\t\t\t\n\t\tconst id = document.location.hash.split(\"id\")[1];\n\n\t\tanilibriaRequest(\n\t\t\t\"getTitle\", \n\t\t\t{\n\t\t\t\tid: id\n\t\t\t}, \n\t\t\tresp => {\n\t\t\t\tsetPageTitle(resp.names.ru);\n\t\t\t\tconst genres = resp.genres.join(\",\");\n\t\t\t\tconst renderContainer = document.querySelector(\"#single .render-container.main-render\");\n\t\t\t\trenderContainer.innerHTML = \"\";\n\t\t\t\tdocument.querySelector(\"#single .preload-spinner\").classList.add(\"dnone\");\n\t\t\t\trenderContainer.appendChild(app.renderer.renderSingle(resp).node);\n\n\t\t\t\tlet squery = resp.names.ru;\n\t\t\t\tconst filters = getItemCardFields().join(\",\");\n\n\t\t\t\tanilibriaRequest(\n\t\t\t\t\t\"searchTitles\", \n\t\t\t\t\t{\n\t\t\t\t\t\tsearch: resp.names.ru,\n\t\t\t\t\t\tafter: 0,\n\t\t\t\t\t\tlimit: _CONF.numbOfRelevant,\n\t\t\t\t\t\tfilter: getItemCardFields(),\n\t\t\t\t\t},\n\t\t\t\t\tresp => {\n\t\t\t\t\t\tresp.splice(_CONF.numbOfRelevant, resp.length);\n\t\t\t\t\t\tconst ids = resp.map(i => i.id);\n\t\t\t\t\t\tconst renderContainer = document.querySelector(\"#single .render-container.relevant-items-render\");\n\t\t\t\t\t\trenderContainer.innerHTML = \"\";\n\t\t\t\t\t\tinsertListToRenderContainer(renderContainer, resp.filter(i => i.id != id));\n\n\t\t\t\t\t\tif(_CONF.numbOfRelevant - renderContainer.childNodes.length > 0) {\n\t\t\t\t\t\t\tanilibriaRequest(\n\t\t\t\t\t\t\t\t\"searchTitles\", \n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsearch: \"\",\n\t\t\t\t\t\t\t\t\tgenres: genres,\n\t\t\t\t\t\t\t\t\tafter: 0,\n\t\t\t\t\t\t\t\t\tlimit: _CONF.numbOfRelevant + 1,\n\t\t\t\t\t\t\t\t\tfilter: getItemCardFields(),\n\t\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t\tresp2 => {\n\t\t\t\t\t\t\t\t\tresp2 = resp2.filter(i => i.id != id);\n\t\t\t\t\t\t\t\t\tfor(let i = 0; i < resp2.length; i++) {\n\t\t\t\t\t\t\t\t\t\tif(renderContainer.childNodes.length >= _CONF.numbOfRelevant) {\n\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif(ids.indexOf(resp2[i].id) > -1) {\n\t\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\trenderContainer.appendChild(app.renderer.renderItemCard(resp2[i]).node);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t});\n\n\tapp.router.addEvent(\"favourites\", router => {\n\t\tapp.loader.favouritesList(resp => {\n\t\t\tconst renderContainer = document.querySelector(\"#favourites .render-container\");\n\t\t\tdocument.querySelector(\"#favourites .preload-spinner\").classList.add(\"dnone\");\n\t\t\trenderContainer.innerHTML = \"\";\n\t\t\tfor(let i = resp.length-1; i >= 0 ; i--) {\n\t\t\t\trenderContainer.appendChild(app.renderer.renderItemCard(resp[i]).node);\n\t\t\t}\n\t\t});\n\t});\n\n\tapp.router.addEvent(\"search\", router => {\n\t\tlet squery = decodeURI(document.location.hash.split(\"sq:\")[1]);\n\t\tdocument.querySelector(`[name=\"search\"]`).value = squery;\n\n\t\tapp.loader.searchPageUpToLoad(0, resp => {\n\t\t\tconst renderContainer = document.querySelector(\"#search .render-container\");\n\t\t\trenderContainer.innerHTML = \"\";\n\t\t\tdocument.querySelector(\"#search .preload-spinner\").classList.add(\"dnone\");\n\t\t\tresp.length && document.querySelector(\"#search .more-btn\").classList.remove(\"dnone\");\n\t\t\tinsertListToRenderContainer(renderContainer, resp);\n\t\t});\n\t});\n\n\tapp.router.addEvent(\"new-series\", router => {\n\t\tanilibriaRequest(\n\t\t\t\"getUpdates\", \n\t\t\t{\n\t\t\t\tafter: 0,\n\t\t\t\tlimit: 60,\n\t\t\t\tfilter: getItemCardFields(),\n\t\t\t},\n\t\t\tresp => {\n\t\t\t\tconst renderContainer = document.querySelector(\"#new-series .render-container\");\n\t\t\t\trenderContainer.innerHTML = \"\";\n\t\t\t\tdocument.querySelector(\"#new-series .preload-spinner\").classList.add(\"dnone\");\n\n\t\t\t\tapp.loader.favouritesList(favs => {\n\t\t\t\t\tfor(let i = 0; i < resp.length; i++) {\n\t\t\t\t\t\tfor(let j = 0; j < favs.length; j++) {\n\t\t\t\t\t\t\tif(favs[j].id == resp[i].id) {\n\t\t\t\t\t\t\t\trenderContainer.appendChild(app.renderer.renderItemCard(resp[i]).node);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t});\n\n\tapp.router.addEvent(\"genres\", router => {\n\t\tlet selectedGenres = document.location.hash.split(\"sg:\")[1];\n\t\tsetTimeout(() => {\n\t\t\tmakeSelectedGenresActivated();\n\t\t}, 30);\n\n\t\tconst renderContainer = document.querySelector(\"#genres .render-container\");\n\t\tif(selectedGenres) {\n\t\t\tapp.loader.genresPageUpToLoad(0, resp => {\n\t\t\t\tconst renderContainer = document.querySelector(\"#genres .render-container\");\n\t\t\t\trenderContainer.innerHTML = \"\";\n\t\t\t\tdocument.querySelector(\"#genres .preload-spinner\").classList.add(\"dnone\");\n\t\t\t\tresp.length && document.querySelector(\"#genres .more-btn\").classList.remove(\"dnone\");\n\t\t\t\tinsertListToRenderContainer(renderContainer, resp);\n\t\t\t});\n\t\t} else {\n\t\t\trenderContainer.innerHTML = \"\";\n\t\t\tdocument.querySelector(\"#genres .preload-spinner\").classList.add(\"dnone\");\n\t\t}\n\t});\n}"]}